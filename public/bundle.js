var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function s(t){t.forEach(e)}function r(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode.removeChild(t)}function u(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function c(t){return document.createElement(t)}function h(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function p(t){return document.createTextNode(t)}function f(){return p(" ")}function d(){return p("")}function g(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function m(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function v(t){return""===t?void 0:+t}function b(t,e){e=""+e,t.data!==e&&(t.data=e)}function w(t,e){(null!=e||t.value)&&(t.value=e)}function y(t,e,n,s){t.style.setProperty(e,n,s?"important":"")}class x{constructor(t,e=null){this.e=c("div"),this.a=e,this.u(t)}m(t,e=null){for(let n=0;n<this.n.length;n+=1)a(t,this.n[n],e);this.t=t}u(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}p(t){this.d(),this.u(t),this.m(this.t,this.a)}d(){this.n.forEach(l)}}let $;function _(t){$=t}function k(){if(!$)throw new Error("Function called outside component initialization");return $}function C(){const t=$;return(e,n)=>{const s=t.$$.callbacks[e];if(s){const r=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);s.slice().forEach(e=>{e.call(t,r)})}}}const B=[],M=[],P=[],S=[],A=Promise.resolve();let V=!1;function E(t){P.push(t)}function z(){const t=new Set;do{for(;B.length;){const t=B.shift();_(t),q(t.$$)}for(;M.length;)M.pop()();for(let e=0;e<P.length;e+=1){const n=P[e];t.has(n)||(n(),t.add(n))}P.length=0}while(B.length);for(;S.length;)S.pop()();V=!1}function q(t){t.fragment&&(t.update(t.dirty),s(t.before_update),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(E))}const O=new Set;let j;function G(){j={r:0,c:[],p:j}}function T(){j.r||s(j.c),j=j.p}function D(t,e){t&&t.i&&(O.delete(t),t.i(e))}function H(t,e,n,s){if(t&&t.o){if(O.has(t))return;O.add(t),j.c.push(()=>{O.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}}function I(t,e){t.d(1),e.delete(t.key)}function L(t,n,o){const{fragment:i,on_mount:a,on_destroy:l,after_update:u}=t.$$;i.m(n,o),E(()=>{const n=a.map(e).filter(r);l?l.push(...n):s(n),t.$$.on_mount=[]}),u.forEach(E)}function N(t,e){t.$$.fragment&&(s(t.$$.on_destroy),t.$$.fragment.d(e),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={})}function R(t,e){t.$$.dirty||(B.push(t),V||(V=!0,A.then(z)),t.$$.dirty=n()),t.$$.dirty[e]=!0}function F(e,r,o,i,a,l){const u=$;_(e);const c=r.props||{},h=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:n(),dirty:null};let p=!1;h.ctx=o?o(e,c,(t,n,s=n)=>(h.ctx&&a(h.ctx[t],h.ctx[t]=s)&&(h.bound[t]&&h.bound[t](s),p&&R(e,t)),n)):c,h.update(),p=!0,s(h.before_update),h.fragment=i(h.ctx),r.target&&(r.hydrate?h.fragment.l(function(t){return Array.from(t.childNodes)}(r.target)):h.fragment.c(),r.intro&&D(e.$$.fragment),L(e,r.target,r.anchor),z()),_(u)}class W{$destroy(){N(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function K(t){return t>=10?t.toString():`0${t}`}function J(t){return`${K(Math.floor(t/1e3/60))}:${K(Math.floor(t/1e3)%60)}.${Math.floor(t/10).toString().slice(-2)}`}function Q(e){var n,s,r,o,u,c,f,d,g,v,w,x,$,_,k,C,B=J(e.lapse)+"";return{c(){n=h("svg"),s=h("g"),r=h("circle"),o=h("use"),u=h("g"),c=h("g"),f=h("path"),g=h("g"),v=h("g"),w=h("path"),$=h("circle"),_=h("circle"),k=h("text"),C=p(B),m(r,"id","dial"),m(r,"cx","0"),m(r,"cy","0"),m(r,"r","42"),m(r,"fill","none"),m(r,"stroke","currentColor"),m(r,"stroke-width","5"),m(r,"stroke-dasharray","0.3 1.898"),m(o,"href","#dial"),m(o,"transform","scale(-1 1)"),m(f,"d","M -2.25 0 h 4.5 l -2.25 2.5 l -2.25 -2.5"),m(f,"fill","currentColor"),m(f,"stroke","currentColor"),m(f,"stroke-width","1"),m(f,"stroke-linejoin","round"),m(f,"stroke-linecap","round"),m(c,"transform","translate(0 -50)"),m(u,"transform",d="rotate("+e.rotation+")"),m(w,"d","M 0 -1 v -7.5"),m(w,"fill","none"),m(w,"stroke","currentColor"),m(w,"stroke-width","0.4"),m(w,"stroke-linejoin","round"),m(w,"stroke-linecap","round"),m(v,"transform",x="rotate("+60*e.rotation%360+")"),m($,"r","9"),m($,"fill","none"),m($,"stroke","currentColor"),m($,"stroke-width","0.4"),m(_,"r","1"),m(_,"fill","none"),m(_,"stroke","currentColor"),m(_,"stroke-width","0.4"),m(g,"transform","translate(0 20)"),m(k,"text-anchor","middle"),m(k,"fill","currentColor"),m(k,"dominant-baseline","middle"),m(k,"font-size","14"),y(k,"font-weight","300"),y(k,"letter-spacing","1px"),m(s,"transform","translate(50 50)"),m(n,"viewBox","0 0 100 100"),m(n,"width","200"),m(n,"height","200"),m(n,"class","svelte-1ff0jg8")},m(t,l){a(t,n,l),i(n,s),i(s,r),i(s,o),i(s,u),i(u,c),i(c,f),e.g1_binding(u),i(s,g),i(g,v),i(v,w),e.g2_binding(v),i(g,$),i(g,_),i(s,k),i(k,C)},p(t,e){t.rotation&&d!==(d="rotate("+e.rotation+")")&&m(u,"transform",d),t.rotation&&x!==(x="rotate("+60*e.rotation%360+")")&&m(v,"transform",x),t.lapse&&B!==(B=J(e.lapse)+"")&&b(C,B)},i:t,o:t,d(t){t&&l(n),e.g1_binding(null),e.g2_binding(null)}}}function U(t,e,n){let s,r,o,i,{lapse:a=0}=e;return t.$set=t=>{"lapse"in t&&n("lapse",a=t.lapse)},t.$$.update=(t={lapse:1,minutes:1,seconds:1,transitioned:1})=>{t.lapse&&n("rotation",i=a/1e3/60*360%360),(t.lapse||t.minutes||t.seconds)&&!a&&r&&s&&(n("minutes",r.style.transition="transform 0.2s ease-in-out",r),n("seconds",s.style.transition="transform 0.2s ease-in-out",s),n("transitioned",o=!1)),(t.lapse||t.transitioned)&&a&&!o&&(n("minutes",r.style.transition="none",r),n("seconds",s.style.transition="none",s),n("transitioned",o=!0))},{lapse:a,seconds:s,minutes:r,rotation:i,g1_binding:function(t){M[t?"unshift":"push"](()=>{n("minutes",r=t)})},g2_binding:function(t){M[t?"unshift":"push"](()=>{n("seconds",s=t)})}}}class X extends W{constructor(t){super(),F(this,t,U,Q,o,["lapse"])}}const Y=[];function Z(e,n=t){let s;const r=[];function i(t){if(o(e,t)&&(e=t,s)){const t=!Y.length;for(let t=0;t<r.length;t+=1){const n=r[t];n[1](),Y.push(n,e)}if(t){for(let t=0;t<Y.length;t+=2)Y[t][0](Y[t+1]);Y.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(o,a=t){const l=[o,a];return r.push(l),1===r.length&&(s=n(i)||t),o(e),()=>{const t=r.indexOf(l);-1!==t&&r.splice(t,1),0===r.length&&(s(),s=null)}}}}const tt={subscribe:Z(0,(function(t){const e=(new Date).getTime(),n=setInterval(()=>{const n=(new Date).getTime();t(n-e)},10);return function(){t(0),clearInterval(n)}})).subscribe};function et(t){var e,n,s=new X({props:{lapse:t.lapse}});return{c(){e=c("div"),s.$$.fragment.c(),m(e,"class","stopwatch")},m(t,r){a(t,e,r),L(s,e,null),n=!0},p(t,e){var n={};t.lapse&&(n.lapse=e.lapse),s.$set(n)},i(t){n||(D(s.$$.fragment,t),n=!0)},o(t){H(s.$$.fragment,t),n=!1},d(t){t&&l(e),N(s)}}}function nt(t,e,n){let s,{running:r=!1}=e,o=0;function i(){s&&(s(),n("unsubscribe",s=null))}var a;return a=()=>{i()},k().$$.on_destroy.push(a),t.$set=t=>{"running"in t&&n("running",r=t.running)},t.$$.update=(t={running:1,unsubscribe:1})=>{t.running&&(r?(n("lapse",o=0),i(),n("unsubscribe",s=tt.subscribe(t=>{n("lapse",o=t)}))):i()),t.unsubscribe},{running:r,lapse:o}}class st extends W{constructor(t){super(),F(this,t,nt,et,o,["running"])}}function rt(t,e,n){const s=Object.create(t);return s.item=e[n],s}function ot(t){var e,n,s=t.item.toString()+"";return{c(){e=c("p"),n=p(s),m(e,"class","svelte-1x3fcmm")},m(t,s){a(t,e,s),i(e,n)},p(t,e){t.population&&s!==(s=e.item.toString()+"")&&b(n,s)},d(t){t&&l(e)}}}function it(t){var e,n,s,r,o,h,d,g,v,w,y,x,$,_,k,C,B,M,P,S,A,V,E,z,q,O,j,G,T,I,R,F,W,K,J,Q,U,X,Y,Z,tt,et,nt,it,at,lt,ut,ct,ht,pt,ft,dt,gt,mt,vt,bt,wt,yt,xt,$t,_t,kt,Ct,Bt,Mt,Pt,St,At,Vt=t.graph.nodes().length+"",Et=t.best.toString()+"",zt=t.currentBest.bestValue+"",qt=new st({props:{running:t.running}});let Ot=t.population,jt=[];for(let e=0;e<Ot.length;e+=1)jt[e]=ot(rt(t,Ot,e));return{c(){e=c("div"),n=c("div"),s=c("div"),qt.$$.fragment.c(),r=f(),o=c("div"),(h=c("div")).textContent="Stations:",d=f(),g=c("div"),v=p(Vt),w=f(),y=c("div"),(x=c("div")).textContent="Generation:",$=f(),_=c("div"),k=p(t.currentGeneration),C=f(),B=c("div"),(M=c("div")).textContent="Mutations:",P=f(),S=c("div"),A=p(t.mutationsCount),V=f(),E=c("div"),(z=c("div")).textContent="Crossovers:",q=f(),O=c("div"),j=p(t.crossoversCount),G=f(),T=c("div"),(I=c("div")).textContent="Best value:",R=f(),F=c("div"),W=p(t.bestValue),K=f(),J=c("div"),Q=c("div"),(U=c("div")).textContent="Ð¡hange of the best result",X=f(),Y=c("div"),Z=c("p"),tt=p(t.bestValuesString),et=f(),nt=c("div"),(it=c("div")).textContent="Best path",at=f(),lt=c("div"),ut=c("p"),ct=p(Et),ht=f(),pt=c("div"),(ft=c("div")).textContent="Best path in current population",dt=f(),gt=c("div"),mt=c("p"),vt=p(t.bestPopulation),bt=f(),wt=c("div"),(yt=c("div")).textContent="Best value in population",xt=f(),$t=c("div"),_t=c("p"),kt=p(zt),Ct=f(),Bt=c("div"),(Mt=c("div")).textContent="Population",Pt=f(),St=c("div");for(let t=0;t<jt.length;t+=1)jt[t].c();m(s,"class","stop-watch svelte-1x3fcmm"),m(h,"class","label"),m(g,"class","value svelte-1x3fcmm"),m(o,"class","row svelte-1x3fcmm"),m(x,"class","label"),m(_,"class","value svelte-1x3fcmm"),m(y,"class","row svelte-1x3fcmm"),m(M,"class","label"),m(S,"class","value svelte-1x3fcmm"),m(B,"class","row svelte-1x3fcmm"),m(z,"class","label"),m(O,"class","value svelte-1x3fcmm"),m(E,"class","row svelte-1x3fcmm"),m(I,"class","label svelte-1x3fcmm"),m(F,"class","value svelte-1x3fcmm"),m(T,"class","row row-result svelte-1x3fcmm"),m(n,"class","table svelte-1x3fcmm"),m(U,"class","label-row svelte-1x3fcmm"),m(Z,"class","svelte-1x3fcmm"),m(Y,"class","value-row svelte-1x3fcmm"),m(Q,"class","paths-row svelte-1x3fcmm"),m(it,"class","label-row svelte-1x3fcmm"),m(ut,"class","svelte-1x3fcmm"),m(lt,"class","value-row svelte-1x3fcmm"),m(nt,"class","paths-row svelte-1x3fcmm"),m(ft,"class","label-row svelte-1x3fcmm"),m(mt,"class","svelte-1x3fcmm"),m(gt,"class","value-row svelte-1x3fcmm"),m(pt,"class","paths-row svelte-1x3fcmm"),m(yt,"class","label-row svelte-1x3fcmm"),m(_t,"class","svelte-1x3fcmm"),m($t,"class","value-row svelte-1x3fcmm"),m(wt,"class","paths-row svelte-1x3fcmm"),m(Mt,"class","label-row svelte-1x3fcmm"),m(St,"class","value-row svelte-1x3fcmm"),m(Bt,"class","paths-row svelte-1x3fcmm"),m(J,"class","paths svelte-1x3fcmm"),m(e,"class","info svelte-1x3fcmm")},m(t,l){a(t,e,l),i(e,n),i(n,s),L(qt,s,null),i(n,r),i(n,o),i(o,h),i(o,d),i(o,g),i(g,v),i(n,w),i(n,y),i(y,x),i(y,$),i(y,_),i(_,k),i(n,C),i(n,B),i(B,M),i(B,P),i(B,S),i(S,A),i(n,V),i(n,E),i(E,z),i(E,q),i(E,O),i(O,j),i(n,G),i(n,T),i(T,I),i(T,R),i(T,F),i(F,W),i(e,K),i(e,J),i(J,Q),i(Q,U),i(Q,X),i(Q,Y),i(Y,Z),i(Z,tt),i(J,et),i(J,nt),i(nt,it),i(nt,at),i(nt,lt),i(lt,ut),i(ut,ct),i(J,ht),i(J,pt),i(pt,ft),i(pt,dt),i(pt,gt),i(gt,mt),i(mt,vt),i(J,bt),i(J,wt),i(wt,yt),i(wt,xt),i(wt,$t),i($t,_t),i(_t,kt),i(J,Ct),i(J,Bt),i(Bt,Mt),i(Bt,Pt),i(Bt,St);for(let t=0;t<jt.length;t+=1)jt[t].m(St,null);At=!0},p(t,e){var n={};if(t.running&&(n.running=e.running),qt.$set(n),At&&!t.graph||Vt===(Vt=e.graph.nodes().length+"")||b(v,Vt),At&&!t.currentGeneration||b(k,e.currentGeneration),At&&!t.mutationsCount||b(A,e.mutationsCount),At&&!t.crossoversCount||b(j,e.crossoversCount),At&&!t.bestValue||b(W,e.bestValue),At&&!t.bestValuesString||b(tt,e.bestValuesString),At&&!t.best||Et===(Et=e.best.toString()+"")||b(ct,Et),At&&!t.bestPopulation||b(vt,e.bestPopulation),At&&!t.currentBest||zt===(zt=e.currentBest.bestValue+"")||b(kt,zt),t.population){let n;for(Ot=e.population,n=0;n<Ot.length;n+=1){const s=rt(e,Ot,n);jt[n]?jt[n].p(t,s):(jt[n]=ot(s),jt[n].c(),jt[n].m(St,null))}for(;n<jt.length;n+=1)jt[n].d(1);jt.length=Ot.length}},i(t){At||(D(qt.$$.fragment,t),At=!0)},o(t){H(qt.$$.fragment,t),At=!1},d(t){t&&l(e),N(qt),u(jt,t)}}}function at(t,e,n){let s,r,{running:o,graph:i,currentGeneration:a,mutationsCount:l,crossoversCount:u,bestValue:c,currentBest:h,population:p,best:f,bestValuesArray:d}=e;return t.$set=t=>{"running"in t&&n("running",o=t.running),"graph"in t&&n("graph",i=t.graph),"currentGeneration"in t&&n("currentGeneration",a=t.currentGeneration),"mutationsCount"in t&&n("mutationsCount",l=t.mutationsCount),"crossoversCount"in t&&n("crossoversCount",u=t.crossoversCount),"bestValue"in t&&n("bestValue",c=t.bestValue),"currentBest"in t&&n("currentBest",h=t.currentBest),"population"in t&&n("population",p=t.population),"best"in t&&n("best",f=t.best),"bestValuesArray"in t&&n("bestValuesArray",d=t.bestValuesArray)},t.$$.update=(t={population:1,currentBest:1,bestValuesArray:1})=>{(t.population||t.currentBest)&&n("bestPopulation",s=p[h.bestPosition]?p[h.bestPosition].toString():""),t.bestValuesArray&&n("bestValuesString",r=d.join(" > ").toString())},{running:o,graph:i,currentGeneration:a,mutationsCount:l,crossoversCount:u,bestValue:c,currentBest:h,population:p,best:f,bestValuesArray:d,bestPopulation:s,bestValuesString:r}}class lt extends W{constructor(t){super(),F(this,t,at,it,o,["running","graph","currentGeneration","mutationsCount","crossoversCount","bestValue","currentBest","population","best","bestValuesArray"])}}const ut=Z(0),ct=Z(0);function ht(t){return parseInt(Math.random()*t)}function pt(t){return ut.update(t=>t+1),t}const ft=t=>pt(function(t){return t.reverse()}(t)),dt=t=>pt(function(t){let e,n;do{e=ht(t.length-2),n=ht(t.length)}while(e>=n);for(var s=0,r=n-e+1>>1;s<r;s++)t.swap(e+s,n-s);return t}(t)),gt=t=>pt(function(t){var e,n;do{e=ht(t.length>>1),n=ht(t.length)}while(e>=n);var s=t.slice(0,e),r=t.slice(e,n),o=t.slice(n,t.length);return r.concat(s).concat(o).clone()}(t));function mt(t,e,n,s){let r=n.clone(),o=vt("next",t,e,r,s),i=vt("previous",t,e,r,s);return r[t]=o,r[e]=i,r}function vt(t,e,n,s,r){let o,i,a=new Array,l=s[e].clone(),u=s[n].clone(),c=l[ht(l.length)];for(a.push(c);l.length>1;)o=l[t](l.indexOf(c)),i=u[t](u.indexOf(c)),l.deleteByValue(c),u.deleteByValue(c),c=r[c][o]<r[c][i]?o:i,a.push(c);return a}function bt(t=[]){const e=Math.random();return t.forEach((t,n)=>{if(e<=t)return n}),0}function wt(t){var e,n,r,o,u,h,p,d,v,b,y,x,$,_,k,C,B,M,P,S,A,V,E,z,q,O,j,G,T,I,R=!1,F=!1,W=!1,K=!1;function J(){R=!0,t.input0_input_handler.call(p)}function Q(){F=!0,t.input1_input_handler.call(x)}function U(){W=!0,t.input2_input_handler.call(B)}function X(){K=!0,t.input3_input_handler.call(V)}var Y=new lt({props:{running:t.running,graph:t.graph,currentGeneration:t.currentGeneration,mutationsCount:t.mutationsCount,crossoversCount:t.crossoversCount,bestValue:t.bestValue,currentBest:t.currentBest,population:t.population,best:t.best,bestValuesArray:t.bestValuesArray}});return{c(){e=c("div"),n=c("div"),r=c("div"),o=c("label"),(u=c("span")).textContent="Population size:",h=f(),p=c("input"),d=f(),v=c("label"),(b=c("span")).textContent="Crossover probability:",y=f(),x=c("input"),$=f(),_=c("label"),(k=c("span")).textContent="Mutation probability:",C=f(),B=c("input"),M=f(),P=c("label"),(S=c("span")).textContent="Interval duration:",A=f(),V=c("input"),E=f(),z=c("div"),(q=c("button")).textContent="Start",O=f(),(j=c("button")).textContent="Stop",G=f(),Y.$$.fragment.c(),m(u,"class","svelte-gdz7qb"),m(p,"class","text-input svelte-gdz7qb"),m(p,"type","number"),m(p,"step","1"),m(p,"min","1"),m(p,"max","50"),m(o,"class","svelte-gdz7qb"),m(b,"class","svelte-gdz7qb"),m(x,"class","text-input svelte-gdz7qb"),m(x,"type","number"),m(x,"step","0.1"),m(x,"min","0.01"),m(x,"max","1"),m(v,"class","svelte-gdz7qb"),m(k,"class","svelte-gdz7qb"),m(B,"class","text-input svelte-gdz7qb"),m(B,"type","number"),m(B,"step","0.01"),m(B,"min","0.01"),m(B,"max","1"),m(_,"class","svelte-gdz7qb"),m(S,"class","svelte-gdz7qb"),m(V,"class","text-input svelte-gdz7qb"),m(V,"type","number"),m(V,"step","20"),m(V,"min","10"),m(V,"max","3000"),m(P,"class","svelte-gdz7qb"),m(q,"class","startButton protrude svelte-gdz7qb"),m(j,"class","startButton protrude svelte-gdz7qb"),m(z,"class","buttons svelte-gdz7qb"),m(r,"class","constants svelte-gdz7qb"),m(n,"class","result-wrapper svelte-gdz7qb"),m(e,"class","calculate-block svelte-gdz7qb"),I=[g(p,"input",J),g(x,"input",Q),g(B,"input",U),g(V,"input",X),g(q,"click",t.onStart),g(j,"click",t.onStop)]},m(s,l){a(s,e,l),i(e,n),i(n,r),i(r,o),i(o,u),i(o,h),i(o,p),w(p,t.populationSize),i(r,d),i(r,v),i(v,b),i(v,y),i(v,x),w(x,t.crossoverProbability),i(r,$),i(r,_),i(_,k),i(_,C),i(_,B),w(B,t.mutationProbability),i(r,M),i(r,P),i(P,S),i(P,A),i(P,V),w(V,t.intervalDuration),i(r,E),i(r,z),i(z,q),i(z,O),i(z,j),i(n,G),L(Y,n,null),T=!0},p(t,e){!R&&t.populationSize&&w(p,e.populationSize),R=!1,!F&&t.crossoverProbability&&w(x,e.crossoverProbability),F=!1,!W&&t.mutationProbability&&w(B,e.mutationProbability),W=!1,!K&&t.intervalDuration&&w(V,e.intervalDuration),K=!1;var n={};t.running&&(n.running=e.running),t.graph&&(n.graph=e.graph),t.currentGeneration&&(n.currentGeneration=e.currentGeneration),t.mutationsCount&&(n.mutationsCount=e.mutationsCount),t.crossoversCount&&(n.crossoversCount=e.crossoversCount),t.bestValue&&(n.bestValue=e.bestValue),t.currentBest&&(n.currentBest=e.currentBest),t.population&&(n.population=e.population),t.best&&(n.best=e.best),t.bestValuesArray&&(n.bestValuesArray=e.bestValuesArray),Y.$set(n)},i(t){T||(D(Y.$$.fragment,t),T=!0)},o(t){H(Y.$$.fragment,t),T=!1},d(t){t&&l(e),N(Y),s(I)}}}function yt(t,e,n){const s=C();let r,o,i,a=20,l=.9,u=.1,c=40,{graph:h,stationsBetween:p,dis:f}=e,d=!1,g=0,m=0,b=[],w=[],y={bestPosition:0,bestValue:[]},x=[],$=[];ut.subscribe(t=>n("mutationsCount",o=t)),ct.subscribe(t=>n("crossoversCount",i=t));function _(){n("currentGeneration",g++,g),n("population",x=function(t,e,n,s,r){let o=t.clone(),i=new Array;i.push(o[e.bestPosition]),i.push(dt(n.clone())),i.push(gt(n.clone())),i.push(ft(n.clone())),i.push(n.clone());const a=function(t=[]){const e=t.map(t=>1/t),n=e.reduce((t,e)=>t+=e);let s;return e.map(t=>t/n).map(t=>s=(s||0)+t)}(s);for(let t=5;t<r;t++)i.push(o[bt(a)]);return o=i}(x,y,w,$,a)),n("population",x=function(t,e,n,s){let r=new Array;for(let t=0;t<n;t++)Math.random()<s&&r.push(t);r.shuffle();for(let n=0,s=r.length-1;n<s;n+=2)t=mt(r[n],r[n+1],t,e),ct.update(t=>t+1);return t}(x,f,a,l)),n("population",x=function(t,e,n){let s=t.clone();for(let r=0;r<e;r++)Math.random()<n&&(Math.random()>.5?s[r]=dt(t[r]):s[r]=gt(t[r]),r--);return s}(x,a,u)),k()}function k(){$=x.map(t=>(function(t,e){return t.reduce((t,n,s,r)=>t+=e[n][r[s-1]])})(t,f)),n("currentBest",y=function(t){const e=t.min();return{bestValue:e,bestPosition:t.indexOf(e)}}($)),(void 0===m||m>y.bestValue)&&(n("best",w=x[y.bestPosition].clone()),n("bestValue",m=y.bestValue),n("bestValuesArray",b=[...b,m]))}return t.$set=t=>{"graph"in t&&n("graph",h=t.graph),"stationsBetween"in t&&n("stationsBetween",p=t.stationsBetween),"dis"in t&&n("dis",f=t.dis)},{populationSize:a,crossoverProbability:l,mutationProbability:u,intervalDuration:c,graph:h,stationsBetween:p,dis:f,running:d,currentGeneration:g,bestValue:m,bestValuesArray:b,best:w,currentBest:y,population:x,mutationsCount:o,crossoversCount:i,onStart:function(){d||(n("currentGeneration",g=0),n("bestValue",m=void 0),n("best",w=[]),n("bestValuesArray",b=[]),n("currentBest",y=0),n("population",x=[]),$=new Array(a),ut.update(t=>0),ct.update(t=>0),function(){const t=h.nodes().length;n("population",x=Array.apply(null,Array(a)).map(e=>(function(t){return Array.from(Array(t).keys()).shuffle()})(t))),k()}(),r=setInterval(_,c),n("running",d=!0))},onStop:function(){d&&(clearInterval(r),s("getResult",{result:w}),n("running",d=!1))},input0_input_handler:function(){a=v(this.value),n("populationSize",a)},input1_input_handler:function(){l=v(this.value),n("crossoverProbability",l)},input2_input_handler:function(){u=v(this.value),n("mutationProbability",u)},input3_input_handler:function(){c=v(this.value),n("intervalDuration",c)}}}class xt extends W{constructor(t){super(),F(this,t,yt,wt,o,["graph","stationsBetween","dis"])}}function $t(t,e,n){const s=Object.create(t);return s.station=e[n],s.index=n,s}function _t(t,e,n){const s=Object.create(t);return s.station=e[n],s.indexInside=n,s}function kt(t,e,n){const s=Object.create(t);return s.gap=e[n],s.index=n,s}function Ct(t){var e,n,s,r,o,d,v,b,w,y,x,$,_,k,C,B,M,P,S,A,V,E,z,q,O,j;let G=t.resultPath,T=[];for(let e=0;e<G.length;e+=1)T[e]=Mt(kt(t,G,e));var D=t.resultPath.length&&Pt(t);return{c(){e=c("div"),n=c("aside"),(s=c("button")).textContent="Play",r=f();for(let t=0;t<T.length;t+=1)T[t].c();o=f(),d=h("svg"),v=h("defs"),b=h("symbol"),w=h("path"),y=h("path"),x=h("path"),$=h("g"),_=h("text"),k=p("Ð¥Ð¾Ð»Ð¾Ð´Ð½Ð¾Ð³ÑÑÑÑÐºÐ¾-Ð·Ð°Ð²Ð¾Ð´ÑÑÐºÐ° Ð»ÑÐ½ÑÑ\n        "),C=h("text"),B=p("Ð¡Ð°Ð»ÑÑÐ²ÑÑÐºÐ° Ð»ÑÐ½ÑÑ\n        "),M=h("text"),P=p("ÐÐ»ÐµÐºÑÑÑÐ²ÑÑÐºÐ° Ð»ÑÐ½ÑÑ\n        "),S=h("g"),D&&D.c(),A=h("g"),V=h("text"),E=p("ÐÐµÑÐ¶Ð°Ð²iÐ½ÑÑÐºÐ°"),z=h("text"),q=p("ÐÐ´ÐµÑÑÐºÐ°"),m(s,"class","start-button svelte-4qhb68"),m(n,"class","svelte-4qhb68"),m(w,"fill","#fff"),m(w,"d","M6.6 11.5a4.9 4.9 0 110-9.8A4.8 4.8 0 019.7 3a9.7 9.7 0 004.5\n            2v3.5a9.7 9.7 0 00-3.9 1.6l-.9.6a4.8 4.8 0 01-2.8 1z"),m(y,"d","M6.7 3.5a3 3 0 012 .7 11.5 11.5 0 003.7 2V7a11.4 11.4 0 00-3.1\n            1.6l-.9.6a3 3 0 01-1.8.6 3.1 3.1 0 110-6.3m0-3.5A6.6 6.6 0 000\n            6.6a6.6 6.6 0 006.6 6.7 6.5 6.5 0 003.8-1.3l.9-.6a8 8 0\n            014.6-1.4V3.3a8 8 0 01-5-1.8A6.5 6.5 0 006.6 0z"),m(b,"id","w"),m(x,"fill","none"),m(x,"stroke",t.colors.green),m(x,"stroke-width","3"),m(x,"d","M747 1310l-18-18-241 241a72 72 0 00-21 51v85h-15v21h56v-21h-16v-85a47\n        47 0 0114-34l46-45 12 12 15-15-12-12z"),m(_,"fill",t.colors.red),m(_,"transform","rotate(-90 1562.5 515.7)"),m(C,"fill",t.colors.blue),m(C,"transform","rotate(-90 700.6 -347.6)"),m(M,"fill",t.colors.green),m(M,"transform","rotate(-90 415.7 -32.8)"),m($,"font-size","34"),m(S,"fill",t.colors.text),m(S,"font-size","53"),m(V,"transform","translate(573 1556)"),m(z,"transform","translate(519 1690)"),m(A,"fill",t.colors.textDisable),m(A,"font-size","53"),m(d,"xmlns","http://www.w3.org/2000/svg"),m(d,"xmlns:xlink","http://www.w3.org/1999/xlink"),m(d,"class",O="map "+(t.isMapActive?"map-active":"")+" svelte-4qhb68"),m(d,"font-family","Tahoma"),m(d,"viewBox","0 0 1501 2151"),m(e,"class","container svelte-4qhb68"),j=g(s,"click",t.onShow)},m(t,l){a(t,e,l),i(e,n),i(n,s),i(n,r);for(let t=0;t<T.length;t+=1)T[t].m(n,null);i(e,o),i(e,d),i(d,v),i(v,b),i(b,w),i(b,y),i(d,x),i(d,$),i($,_),i(_,k),i($,C),i(C,B),i($,M),i(M,P),i(d,S),D&&D.m(S,null),i(d,A),i(A,V),i(V,E),i(A,z),i(z,q)},p(t,e){if(t.resultPath||t.getStation){let s;for(G=e.resultPath,s=0;s<G.length;s+=1){const r=kt(e,G,s);T[s]?T[s].p(t,r):(T[s]=Mt(r),T[s].c(),T[s].m(n,null))}for(;s<T.length;s+=1)T[s].d(1);T.length=G.length}e.resultPath.length?D?D.p(t,e):((D=Pt(e)).c(),D.m(S,null)):D&&(D.d(1),D=null),t.isMapActive&&O!==(O="map "+(e.isMapActive?"map-active":"")+" svelte-4qhb68")&&m(d,"class",O)},d(t){t&&l(e),u(T,t),D&&D.d(),j()}}}function Bt(t){var e,n,r,o,u=t.getStation(t.station).text+"";function h(){return t.mouseenter_handler(t)}return{c(){e=c("div"),r=f(),n=new x(u,r),m(e,"class","aside-row__name svelte-4qhb68"),o=[g(e,"mouseenter",h),g(e,"mouseout",t.disableStationHover)]},m(t,s){a(t,e,s),n.m(e),i(e,r)},p(e,s){t=s,e.resultPath&&u!==(u=t.getStation(t.station).text+"")&&n.p(u)},d(t){t&&l(e),s(o)}}}function Mt(t){var e,n,s,r,o,h,d=t.gap.weight+"";let g=t.gap.stations,v=[];for(let e=0;e<g.length;e+=1)v[e]=Bt(_t(t,g,e));return{c(){e=c("div"),n=c("div");for(let t=0;t<v.length;t+=1)v[t].c();s=f(),r=c("div"),o=p(d),h=f(),m(n,"class","aside-row__stations svelte-4qhb68"),m(r,"class","aside-row__weight svelte-4qhb68"),m(e,"class","aside-row svelte-4qhb68")},m(t,l){a(t,e,l),i(e,n);for(let t=0;t<v.length;t+=1)v[t].m(n,null);i(e,s),i(e,r),i(r,o),i(e,h)},p(t,e){if(t.getStation||t.resultPath){let s;for(g=e.gap.stations,s=0;s<g.length;s+=1){const r=_t(e,g,s);v[s]?v[s].p(t,r):(v[s]=Bt(r),v[s].c(),v[s].m(n,null))}for(;s<v.length;s+=1)v[s].d(1);v.length=g.length}t.resultPath&&d!==(d=e.gap.weight+"")&&b(o,d)},d(t){t&&l(e),u(v,t)}}}function Pt(t){var e,n=[],s=new Map;let r=t.stationsPath;const o=t=>t.station.id;for(let e=0;e<r.length;e+=1){let i=$t(t,r,e),a=o(i);s.set(a,n[e]=At(a,i))}return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=d()},m(t,s){for(let e=0;e<n.length;e+=1)n[e].m(t,s);a(t,e,s)},p(t,r){const i=r.stationsPath;n=function(t,e,n,s,r,o,i,a,l,u,c,h){let p=t.length,f=o.length,d=p;const g={};for(;d--;)g[t[d].key]=d;const m=[],v=new Map,b=new Map;for(d=f;d--;){const t=h(r,o,d),a=n(t);let l=i.get(a);l?s&&l.p(e,t):(l=u(a,t)).c(),v.set(a,m[d]=l),a in g&&b.set(a,Math.abs(d-g[a]))}const w=new Set,y=new Set;function x(t){D(t,1),t.m(a,c),i.set(t.key,t),c=t.first,f--}for(;p&&f;){const e=m[f-1],n=t[p-1],s=e.key,r=n.key;e===n?(c=e.first,p--,f--):v.has(r)?!i.has(s)||w.has(s)?x(e):y.has(r)?p--:b.get(s)>b.get(r)?(y.add(s),x(e)):(w.add(r),p--):(l(n,i),p--)}for(;p--;){const e=t[p];v.has(e.key)||l(e,i)}for(;f;)x(m[f-1]);return m}(n,t,o,1,r,i,s,e.parentNode,I,At,e,$t)},d(t){for(let e=0;e<n.length;e+=1)n[e].d(t);t&&l(e)}}}function St(t){var e,n,s,r,o,u,c,p,f,d=t.station.path+"",g=t.station.stop+"",v=t.station.text+"";return{c(){e=h("g"),n=h("g"),s=h("g"),o=h("g"),c=h("text"),m(s,"stroke",r=t.colors[t.station.color]),m(n,"fill","none"),m(n,"stroke-miterlimit","10"),m(n,"stroke-width","28"),m(o,"fill",u=t.colors[t.station.color]),m(c,"style",p=t.station.style),m(e,"class",f="station "+(t.showingStation==t.station.id?"fadein":"")+" svelte-4qhb68")},m(t,r){a(t,e,r),i(e,n),i(n,s),s.innerHTML=d,i(e,o),o.innerHTML=g,i(e,c),c.innerHTML=v},p(t,n){t.stationsPath&&d!==(d=n.station.path+"")&&(s.innerHTML=d),t.stationsPath&&r!==(r=n.colors[n.station.color])&&m(s,"stroke",r),t.stationsPath&&g!==(g=n.station.stop+"")&&(o.innerHTML=g),t.stationsPath&&u!==(u=n.colors[n.station.color])&&m(o,"fill",u),t.stationsPath&&v!==(v=n.station.text+"")&&(c.innerHTML=v),t.stationsPath&&p!==(p=n.station.style)&&m(c,"style",p),(t.showingStation||t.stationsPath)&&f!==(f="station "+(n.showingStation==n.station.id?"fadein":"")+" svelte-4qhb68")&&m(e,"class",f)},d(t){t&&l(e)}}}function At(t,e){var n,s,r=e.station&&St(e);return{key:t,first:null,c(){n=d(),r&&r.c(),s=d(),this.first=n},m(t,e){a(t,n,e),r&&r.m(t,e),a(t,s,e)},p(t,e){e.station?r?r.p(t,e):((r=St(e)).c(),r.m(s.parentNode,s)):r&&(r.d(1),r=null)},d(t){t&&l(n),r&&r.d(t),t&&l(s)}}}function Vt(e){var n,s=e.resultPath&&e.resultPath.length&&Ct(e);return{c(){s&&s.c(),n=d()},m(t,e){s&&s.m(t,e),a(t,n,e)},p(t,e){e.resultPath&&e.resultPath.length?s?s.p(t,e):((s=Ct(e)).c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i:t,o:t,d(t){s&&s.d(t),t&&l(n)}}}function Et(t,e,n){let s,{stationsBetween:r,path:o,stations:i}=e,a=!0,l=[],u=[],c=null;function h(t){n("isMapActive",a=!1),n("showingStation",c=t)}function p(t){clearInterval(s),h(t)}function f(){n("isMapActive",a=!0),n("showingStation",c=null)}function d({path:t=[],stationsBetween:e}){let s=[];return t&&t.length&&(n("resultPath",l=function({path:t=[],stationsBetween:e}){let n=new Array(t.length);for(let s=1;s<t.length;s++){const r=t[s-1],o=t[s],i=e[r][o];n[s]={stations:i.slice(1),weight:i.weight}}return n[0]={stations:[t[0].toString()],weight:0},n}({path:t,stationsBetween:e})),l.map(t=>{t.stations.map(t=>{s.push(i.find(e=>e.id==t))})})),s}const g=t=>i.find(e=>e.id==t)||{};return t.$set=t=>{"stationsBetween"in t&&n("stationsBetween",r=t.stationsBetween),"path"in t&&n("path",o=t.path),"stations"in t&&n("stations",i=t.stations)},t.$$.update=(t={path:1,stationsBetween:1})=>{(t.path||t.stationsBetween)&&n("stationsPath",u=d({path:o,stationsBetween:r}))},{stationsBetween:r,path:o,stations:i,isMapActive:a,resultPath:l,stationsPath:u,showingStation:c,onStationHover:p,disableStationHover:f,onShow:function(){clearInterval(s),function(){let t=0;s=setInterval(()=>{t<l.length?(h(t),t++):(clearInterval(s),f())},300)}()},getStation:g,colors:{red:"#d22531",blue:"#2060ba",green:"#41a747",text:"#09303b",textDisable:"#9c98a6"},mouseenter_handler:({station:t})=>p(g(t).id)}}class zt extends W{constructor(t){super(),F(this,t,Et,Vt,o,["stationsBetween","path","stations"])}}function qt(e){var n,r,o,u,h,d,v,b,w;return{c(){n=c("section"),r=c("label"),o=c("input"),u=p("\n    Kharkiv metro"),h=f(),d=c("label"),v=c("input"),b=p("\n    Other metro"),e.$$binding_groups[0].push(o),m(o,"type","radio"),o.__value=1,o.value=o.__value,e.$$binding_groups[0].push(v),m(v,"type","radio"),v.__value=2,v.value=v.__value,m(n,"class","svelte-1sgfbb2"),w=[g(o,"change",e.input0_change_handler),g(o,"change",e.onChange),g(v,"change",e.input1_change_handler),g(v,"change",e.onChange)]},m(t,s){a(t,n,s),i(n,r),i(r,o),o.checked=o.__value===e.selectedMetro,i(r,u),i(n,h),i(n,d),i(d,v),v.checked=v.__value===e.selectedMetro,i(d,b)},p(t,e){t.selectedMetro&&(o.checked=o.__value===e.selectedMetro),t.selectedMetro&&(v.checked=v.__value===e.selectedMetro)},i:t,o:t,d(t){t&&l(n),e.$$binding_groups[0].splice(e.$$binding_groups[0].indexOf(o),1),e.$$binding_groups[0].splice(e.$$binding_groups[0].indexOf(v),1),s(w)}}}function Ot(t,e,n){const s=C();let{selectedMetro:r}=e;return t.$set=t=>{"selectedMetro"in t&&n("selectedMetro",r=t.selectedMetro)},{selectedMetro:r,onChange:function(){s("onSelectMetro",{result:r})},input0_change_handler:function(){r=this.__value,n("selectedMetro",r)},input1_change_handler:function(){r=this.__value,n("selectedMetro",r)},$$binding_groups:[[]]}}class jt extends W{constructor(t){super(),F(this,t,Ot,qt,o,["selectedMetro"])}}function Gt(t,e,n){const s=Object.create(t);return s.link=e[n],s.index=n,s}function Tt(t){var e,n,s,r,o,u,h,d,m,v=t.link.source+"",w=t.link.target+"",y=t.link.weight+"";function x(){return t.click_handler(t)}return{c(){e=c("p"),n=p(v),s=p(" ââ "),r=p(w),o=p(" = "),u=p(y),h=f(),(d=c("button")).textContent="Remove",m=g(d,"click",x)},m(t,l){a(t,e,l),i(e,n),i(e,s),i(e,r),i(e,o),i(e,u),i(e,h),i(e,d)},p(e,s){t=s,e.links&&v!==(v=t.link.source+"")&&b(n,v),e.links&&w!==(w=t.link.target+"")&&b(r,w),e.links&&y!==(y=t.link.weight+"")&&b(u,y)},d(t){t&&l(e),m()}}}function Dt(e){var n,r,o,h,p,d,v,b,y,x,$,_,k,C,B,M=!1;let P=e.links,S=[];for(let t=0;t<P.length;t+=1)S[t]=Tt(Gt(e,P,t));function A(){M=!0,e.input2_input_handler.call(x)}return{c(){n=c("section"),(r=c("p")).textContent="Links:",o=f();for(let t=0;t<S.length;t+=1)S[t].c();h=f(),p=c("div"),d=c("input"),v=f(),b=c("input"),y=f(),x=c("input"),$=f(),(_=c("button")).textContent="Send",k=f(),(C=c("button")).textContent="Send",m(d,"type","text"),m(b,"type","text"),m(x,"type","number"),m(n,"class","svelte-1sgfbb2"),B=[g(d,"input",e.input0_input_handler),g(b,"input",e.input1_input_handler),g(x,"input",A),g(_,"click",e.onAdd),g(C,"click",e.onSubmit)]},m(t,s){a(t,n,s),i(n,r),i(n,o);for(let t=0;t<S.length;t+=1)S[t].m(n,null);i(n,h),i(n,p),i(p,d),w(d,e.source),i(p,v),i(p,b),w(b,e.target),i(p,y),i(p,x),w(x,e.weight),i(p,$),i(p,_),i(n,k),i(n,C)},p(t,e){if(t.links){let s;for(P=e.links,s=0;s<P.length;s+=1){const r=Gt(e,P,s);S[s]?S[s].p(t,r):(S[s]=Tt(r),S[s].c(),S[s].m(n,h))}for(;s<S.length;s+=1)S[s].d(1);S.length=P.length}t.source&&d.value!==e.source&&w(d,e.source),t.target&&b.value!==e.target&&w(b,e.target),!M&&t.weight&&w(x,e.weight),M=!1},i:t,o:t,d(t){t&&l(n),u(S,t),s(B)}}}let Ht="";function It(t,e,n){const s=C();let r,o,i;function a(t){n("links",l=l.filter(e=>e!==t))}let l;return n("links",l=[]),{source:r,target:o,weight:i,onAdd:function(){n("links",l=[...l,{source:r,target:o,weight:i}]),n("source",r=""),n("target",o=""),n("weight",i="")},onRemove:a,onSubmit:function(){s("onSubmitGraph",{result:Ht})},links:l,click_handler:({link:t})=>a(t),input0_input_handler:function(){r=this.value,n("source",r)},input1_input_handler:function(){o=this.value,n("target",o)},input2_input_handler:function(){i=v(this.value),n("weight",i)}}}class Lt extends W{constructor(t){super(),F(this,t,It,Dt,o,[])}}var Nt=function(t){var e={addNode:r,removeNode:function(t){return Object.keys(n).forEach((function(e){n[e].forEach((function(n){n===t&&h(e,n)}))})),delete n[t],e},nodes:o,adjacent:i,addEdge:c,removeEdge:h,setEdgeWeight:l,getEdgeWeight:u,indegree:function(t){var e=0;function s(n){n===t&&e++}return Object.keys(n).forEach((function(t){n[t].forEach(s)})),e},outdegree:function(t){return t in n?n[t].length:0},depthFirstSearch:p,lowestCommonAncestors:function(t,e){var n=[],s=[];(function t(r,o){return!!r[o]||(r[o]=!0,n.push(o),o==e?(s.push(o),!1):i(o).every(e=>t(r,e)))})({},t)&&function t(e,r){e[r]||(e[r]=!0,n.indexOf(r)>=0?s.push(r):0==s.length&&i(r).forEach(n=>{t(e,n)}))}({},e);return s},topologicalSort:function(t,e){return p(t,e).reverse()},shortestPath:function(t,e){var n={},s={},r={};function a(){var t,e=1/0;return Object.keys(r).forEach((function(s){n[s]<e&&(e=n[s],t=s)})),void 0===t?(r={},null):(delete r[t],t)}function l(t,e){var r=u(t,e);n[e]>n[t]+r&&(n[e]=n[t]+r,s[e]=t)}return function(){(function(){if(o().forEach((function(t){n[t]=1/0})),n[t]!==1/0)throw new Error("Source node is not in the graph");if(n[e]!==1/0)throw new Error("Destination node is not in the graph");n[t]=0})(),o().forEach((function(t){r[t]=!0}));for(;0!==Object.keys(r).length;){var s=a();i(s).forEach((function(t){l(s,t)}))}}(),function(){var n=[],r=0,o=e;for(;s[o];)n.push(o),r+=u(s[o],o),o=s[o];if(o!==t)throw new Error("No path found");return n.push(o),n.reverse(),n.weight=r,n}()},serialize:function(){var t={nodes:o().map((function(t){return{id:t}})),links:[]};return t.nodes.forEach((function(e){var n=e.id;i(n).forEach((function(e){t.links.push({source:n,target:e,weight:u(n,e)})}))})),t},deserialize:f},n={},s={};function r(t){return n[t]=i(t),e}function o(){var t={};return Object.keys(n).forEach((function(e){t[e]=!0,n[e].forEach((function(e){t[e]=!0}))})),Object.keys(t)}function i(t){return n[t]||[]}function a(t,e){return t+"|"+e}function l(t,n,r){return s[a(t,n)]=r,e}function u(t,e){var n=s[a(t,e)];return void 0===n?1:n}function c(t,n,s){return r(t),r(n),i(t).push(n),void 0!==s&&l(t,n,s),e}function h(t,s){return n[t]&&(n[t]=i(t).filter((function(t){return t!==s}))),e}function p(t,e){t||(t=o()),"boolean"!=typeof e&&(e=!0);var n={},s=[];function r(t){n[t]||(n[t]=!0,i(t).forEach(r),s.push(t))}return e?t.forEach(r):(t.forEach((function(t){n[t]=!0})),t.forEach((function(t){i(t).forEach(r)}))),s}function f(t){return t.nodes.forEach((function(t){r(t.id)})),t.links.forEach((function(t){c(t.source,t.target,t.weight)})),e}return(t&&f(t),e)};function Rt(t){const e=6;function n(t){return t+e}const s=Nt();t.map(t=>({...t,weight:n(t.weight)})).map(t=>{s.addEdge(t.from,t.to,t.weight),s.addEdge(t.to,t.from,t.weight)});let r=[];s.nodes().map((t,e)=>{r.push([]),s.nodes().map((n,o)=>{const i=s.shortestPath(t,n);r[e].push(i)})}),s.nodes().map((t,e)=>{s.nodes().map((e,n)=>{const r=s.shortestPath(t,e);s.addEdge(t,e,r.weight)})});const o=function(t){const e=t.nodes(),n=e.length;return Array.apply(null,Array(n)).map((s,r)=>Array.apply(null,Array(n)).map((n,s)=>~~t.getEdgeWeight(e[r],e[s])))}(s);return{graph:s,stationsBetween:r,distances:o}}function Ft(t){var e,n=new Lt({});return n.$on("onSubmitGraph",Qt),{c(){n.$$.fragment.c()},m(t,s){L(n,t,s),e=!0},i(t){e||(D(n.$$.fragment,t),e=!0)},o(t){H(n.$$.fragment,t),e=!1},d(t){N(n,t)}}}function Wt(t){var e,n=new xt({props:{graph:t.graph,stationsBetween:t.stationsBetween,dis:t.dis}});return n.$on("getResult",t.getResult),{c(){n.$$.fragment.c()},m(t,s){L(n,t,s),e=!0},p(t,e){var s={};t.graph&&(s.graph=e.graph),t.stationsBetween&&(s.stationsBetween=e.stationsBetween),t.dis&&(s.dis=e.dis),n.$set(s)},i(t){e||(D(n.$$.fragment,t),e=!0)},o(t){H(n.$$.fragment,t),e=!1},d(t){N(n,t)}}}function Kt(t){var e,n=new zt({props:{path:t.bestPath,stationsBetween:t.stationsBetween,stations:t.stations}});return{c(){n.$$.fragment.c()},m(t,s){L(n,t,s),e=!0},p(t,e){var s={};t.bestPath&&(s.path=e.bestPath),t.stationsBetween&&(s.stationsBetween=e.stationsBetween),t.stations&&(s.stations=e.stations),n.$set(s)},i(t){e||(D(n.$$.fragment,t),e=!0)},o(t){H(n.$$.fragment,t),e=!1},d(t){N(n,t)}}}function Jt(t){var e,n,s,r,o,u,h,p=new jt({props:{selectedMetro:t.selectedMetro}});p.$on("onSelectMetro",t.onSelectMetro);var d=2===t.selectedMetro&&Ft(),g=t.graph&&t.stationsBetween&&t.dis&&Wt(t),m=t.bestPath&&Kt(t);return{c(){(e=c("header")).innerHTML="<h1>Transit challenge solver</h1> <p>For Kharkiv metropoliten</p>",n=f(),s=c("main"),p.$$.fragment.c(),r=f(),d&&d.c(),o=f(),g&&g.c(),u=f(),m&&m.c()},m(t,l){a(t,e,l),a(t,n,l),a(t,s,l),L(p,s,null),i(s,r),d&&d.m(s,null),i(s,o),g&&g.m(s,null),i(s,u),m&&m.m(s,null),h=!0},p(t,e){var n={};t.selectedMetro&&(n.selectedMetro=e.selectedMetro),p.$set(n),2===e.selectedMetro?d?D(d,1):((d=Ft()).c(),D(d,1),d.m(s,o)):d&&(G(),H(d,1,1,()=>{d=null}),T()),e.graph&&e.stationsBetween&&e.dis?g?(g.p(t,e),D(g,1)):((g=Wt(e)).c(),D(g,1),g.m(s,u)):g&&(G(),H(g,1,1,()=>{g=null}),T()),e.bestPath?m?(m.p(t,e),D(m,1)):((m=Kt(e)).c(),D(m,1),m.m(s,null)):m&&(G(),H(m,1,1,()=>{m=null}),T())},i(t){h||(D(p.$$.fragment,t),D(d),D(g),D(m),h=!0)},o(t){H(p.$$.fragment,t),H(d),H(g),H(m),h=!1},d(t){t&&(l(e),l(n),l(s)),N(p),d&&d.d(),g&&g.d(),m&&m.d()}}}function Qt(t){Rt(t.detail.result)}async function Ut(){const t=await fetch("https://metro.kh.ua/metroapi.php?value=path");return Rt(await t.json())}async function Xt(){const t=await fetch("https://metro.kh.ua/metroapi.php?value=stations");return await t.json()}function Yt(t,e,n){let s,r,o,i,a,l,u={};async function c(){const t=await f("graphData",Ut);n("graph",o=t.graph),n("stationsBetween",i=t.stationsBetween),n("dis",a=t.distances)}async function h(){const t=await f("stations",Xt);n("stations",l=t)}var p;async function f(t,e){if(u[t])return u[t];const n=await e();return u[t]=n,n}return p=async()=>{n("selectedMetro",s=1),c(),h()},k().$$.on_mount.push(p),{selectedMetro:s,bestPath:r,graph:o,stationsBetween:i,dis:a,stations:l,onSelectMetro:function(t){n("selectedMetro",s=t.detail.result),c(),h()},getResult:function(t){n("bestPath",r=t.detail.result)}}}return Array.prototype.clone=function(){return this.slice(0)},Array.prototype.max=function(){return Math.max.apply(null,this)},Array.prototype.min=function(){return Math.min.apply(null,this)},Array.prototype.shuffle=function(){if(!this.length)return this;for(var t,e,n=this.length-1;n;t=ht(n),e=this[--n],this[n]=this[t],this[t]=e);return this},Array.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e},Array.prototype.deleteByValue=function(t){var e=this.indexOf(t);this.splice(e,1)},Array.prototype.next=function(t){return t===this.length-1?this[0]:this[t+1]},Array.prototype.previous=function(t){return 0===t?this[this.length-1]:this[t-1]},Array.prototype.swap=function(t,e){if(!(t>this.length||e>this.length||t===e)){var n=this[t];this[t]=this[e],this[e]=n}},Array.prototype.roll=function(){for(var t=ht(this.length),e=[],n=t;n<this.length;n++)e.push(this[n]);for(n=0;n<t;n++)e.push(this[n]);return e},new class extends W{constructor(t){super(),F(this,t,Yt,Jt,o,[])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
