var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function s(t){t.forEach(e)}function o(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e){t.appendChild(e)}function i(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode.removeChild(t)}function u(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function c(t){return document.createElement(t)}function p(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function h(t){return document.createTextNode(t)}function f(){return h(" ")}function d(){return h("")}function g(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function m(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function v(t){return""===t?void 0:+t}function b(t,e){e=""+e,t.data!==e&&(t.data=e)}function w(t,e){(null!=e||t.value)&&(t.value=e)}function y(t,e,n,s){t.style.setProperty(e,n,s?"important":"")}class x{constructor(t,e=null){this.e=c("div"),this.a=e,this.u(t)}m(t,e=null){for(let n=0;n<this.n.length;n+=1)i(t,this.n[n],e);this.t=t}u(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}p(t){this.d(),this.u(t),this.m(this.t,this.a)}d(){this.n.forEach(l)}}let $;function _(t){$=t}function C(t){(function(){if(!$)throw new Error("Function called outside component initialization");return $})().$$.on_destroy.push(t)}function S(){const t=$;return(e,n)=>{const s=t.$$.callbacks[e];if(s){const o=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);s.slice().forEach(e=>{e.call(t,o)})}}}const B=[],M=[],P=[],k=[],A=Promise.resolve();let V=!1;function E(t){P.push(t)}function z(){const t=new Set;do{for(;B.length;){const t=B.shift();_(t),j(t.$$)}for(;M.length;)M.pop()();for(let e=0;e<P.length;e+=1){const n=P[e];t.has(n)||(n(),t.add(n))}P.length=0}while(B.length);for(;k.length;)k.pop()();V=!1}function j(t){t.fragment&&(t.update(t.dirty),s(t.before_update),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(E))}const G=new Set;let O;function U(){O={r:0,c:[],p:O}}function q(){O.r||s(O.c),O=O.p}function R(t,e){t&&t.i&&(G.delete(t),t.i(e))}function T(t,e,n,s){if(t&&t.o){if(G.has(t))return;G.add(t),O.c.push(()=>{G.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}}function D(t,e){t.d(1),e.delete(t.key)}function H(t,n,r){const{fragment:a,on_mount:i,on_destroy:l,after_update:u}=t.$$;a.m(n,r),E(()=>{const n=i.map(e).filter(o);l?l.push(...n):s(n),t.$$.on_mount=[]}),u.forEach(E)}function I(t,e){t.$$.fragment&&(s(t.$$.on_destroy),t.$$.fragment.d(e),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={})}function L(t,e){t.$$.dirty||(B.push(t),V||(V=!0,A.then(z)),t.$$.dirty=n()),t.$$.dirty[e]=!0}function N(e,o,r,a,i,l){const u=$;_(e);const c=o.props||{},p=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:i,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:n(),dirty:null};let h=!1;p.ctx=r?r(e,c,(t,n,s=n)=>(p.ctx&&i(p.ctx[t],p.ctx[t]=s)&&(p.bound[t]&&p.bound[t](s),h&&L(e,t)),n)):c,p.update(),h=!0,s(p.before_update),p.fragment=a(p.ctx),o.target&&(o.hydrate?p.fragment.l(function(t){return Array.from(t.childNodes)}(o.target)):p.fragment.c(),o.intro&&R(e.$$.fragment),H(e,o.target,o.anchor),z()),_(u)}class F{$destroy(){I(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function W(t){return t>=10?t.toString():`0${t}`}function K(t){return`${W(Math.floor(t/1e3/60))}:${W(Math.floor(t/1e3)%60)}.${Math.floor(t/10).toString().slice(-2)}`}function J(e){var n,s,o,r,u,c,f,d,g,v,w,x,$,_,C,S=K(e.lapse)+"";return{c(){n=p("svg"),s=p("g"),o=p("circle"),r=p("g"),u=p("g"),c=p("path"),d=p("g"),g=p("g"),v=p("path"),x=p("circle"),$=p("circle"),_=p("text"),C=h(S),m(o,"cx","0"),m(o,"cy","0"),m(o,"r","42"),m(o,"fill","none"),m(o,"stroke","currentColor"),m(o,"stroke-width","6"),m(o,"stroke-dasharray","0.3 1.898"),m(o,"transform","scale(-1 1)"),m(c,"d","M -2.25 0 h 4.5 l -2.25 2.5 l -2.25 -2.5"),m(c,"fill","currentColor"),m(c,"stroke","currentColor"),m(c,"stroke-width","1"),m(c,"stroke-linejoin","round"),m(c,"stroke-linecap","round"),m(u,"transform","translate(0 -50)"),m(r,"transform",f="rotate("+e.rotation+")"),m(v,"d","M 0 -1 v -7.5"),m(v,"stroke-linejoin","round"),m(v,"stroke-linecap","round"),m(g,"transform",w="rotate("+60*e.rotation%360+")"),m(x,"r","9"),m($,"r","1"),m(d,"transform","translate(0 20)"),m(d,"stroke","currentColor"),m(d,"stroke-width","0.4"),m(d,"fill","none"),m(_,"text-anchor","middle"),m(_,"fill","currentColor"),m(_,"dominant-baseline","middle"),m(_,"font-size","14"),y(_,"font-weight","300"),y(_,"letter-spacing","1px"),m(s,"transform","translate(50 50)"),m(n,"viewBox","0 0 100 100"),m(n,"width","200"),m(n,"height","200"),m(n,"class","svelte-1q1wj20")},m(t,l){i(t,n,l),a(n,s),a(s,o),a(s,r),a(r,u),a(u,c),e.g1_binding(r),a(s,d),a(d,g),a(g,v),e.g2_binding(g),a(d,x),a(d,$),a(s,_),a(_,C)},p(t,e){t.rotation&&f!==(f="rotate("+e.rotation+")")&&m(r,"transform",f),t.rotation&&w!==(w="rotate("+60*e.rotation%360+")")&&m(g,"transform",w),t.lapse&&S!==(S=K(e.lapse)+"")&&b(C,S)},i:t,o:t,d(t){t&&l(n),e.g1_binding(null),e.g2_binding(null)}}}function Q(t,e,n){let s,o,r,a,{lapse:i=0}=e;return t.$set=t=>{"lapse"in t&&n("lapse",i=t.lapse)},t.$$.update=(t={lapse:1,minutes:1,seconds:1,transitioned:1})=>{t.lapse&&n("rotation",a=i/1e3/60*360%360),(t.lapse||t.minutes||t.seconds)&&!i&&o&&s&&(n("minutes",o.style.transition="transform 0.2s ease-in-out",o),n("seconds",s.style.transition="transform 0.2s ease-in-out",s),n("transitioned",r=!1)),(t.lapse||t.transitioned)&&i&&!r&&(n("minutes",o.style.transition="none",o),n("seconds",s.style.transition="none",s),n("transitioned",r=!0))},{lapse:i,seconds:s,minutes:o,rotation:a,g1_binding:function(t){M[t?"unshift":"push"](()=>{n("minutes",o=t)})},g2_binding:function(t){M[t?"unshift":"push"](()=>{n("seconds",s=t)})}}}class X extends F{constructor(t){super(),N(this,t,Q,J,r,["lapse"])}}const Y=[];function Z(e,n=t){let s;const o=[];function a(t){if(r(e,t)&&(e=t,s)){const t=!Y.length;for(let t=0;t<o.length;t+=1){const n=o[t];n[1](),Y.push(n,e)}if(t){for(let t=0;t<Y.length;t+=2)Y[t][0](Y[t+1]);Y.length=0}}}return{set:a,update:function(t){a(t(e))},subscribe:function(r,i=t){const l=[r,i];return o.push(l),1===o.length&&(s=n(a)||t),r(e),()=>{const t=o.indexOf(l);-1!==t&&o.splice(t,1),0===o.length&&(s(),s=null)}}}}const tt={subscribe:Z(0,(function(t){const e=(new Date).getTime(),n=setInterval(()=>{const n=(new Date).getTime();t(n-e)},10);return function(){t(0),clearInterval(n)}})).subscribe};function et(t){var e,n,s=new X({props:{lapse:t.lapse}});return{c(){e=c("div"),s.$$.fragment.c(),m(e,"class","stopwatch")},m(t,o){i(t,e,o),H(s,e,null),n=!0},p(t,e){var n={};t.lapse&&(n.lapse=e.lapse),s.$set(n)},i(t){n||(R(s.$$.fragment,t),n=!0)},o(t){T(s.$$.fragment,t),n=!1},d(t){t&&l(e),I(s)}}}function nt(t,e,n){let s,{running:o=!1}=e,r=0;function a(){s&&(s(),s=null)}return C(()=>{a()}),t.$set=t=>{"running"in t&&n("running",o=t.running)},t.$$.update=(t={running:1})=>{t.running&&(o?(n("lapse",r=0),a(),s=tt.subscribe(t=>{n("lapse",r=t)})):a())},{running:o,lapse:r}}class st extends F{constructor(t){super(),N(this,t,nt,et,r,["running"])}}function ot(t,e,n){const s=Object.create(t);return s.item=e[n],s}function rt(t){var e,n,s=t.item.toString()+"";return{c(){e=c("p"),n=h(s),m(e,"class","svelte-1x3fcmm")},m(t,s){i(t,e,s),a(e,n)},p(t,e){t.population&&s!==(s=e.item.toString()+"")&&b(n,s)},d(t){t&&l(e)}}}function at(t){var e,n,s,o,r,p,d,g,v,w,y,x,$,_,C,S,B,M,P,k,A,V,E,z,j,G,O,U,q,D,L,N,F,W,K,J,Q,X,Y,Z,tt,et,nt,at,it,lt,ut,ct,pt,ht,ft,dt,gt,mt,vt,bt,wt,yt,xt,$t,_t,Ct,St,Bt,Mt,Pt,kt,At,Vt=t.graph.nodes().length+"",Et=t.best.toString()+"",zt=t.currentBest.bestValue+"",jt=new st({props:{running:t.running}});let Gt=t.population,Ot=[];for(let e=0;e<Gt.length;e+=1)Ot[e]=rt(ot(t,Gt,e));return{c(){e=c("div"),n=c("div"),s=c("div"),jt.$$.fragment.c(),o=f(),r=c("div"),(p=c("div")).textContent="Stations:",d=f(),g=c("div"),v=h(Vt),w=f(),y=c("div"),(x=c("div")).textContent="Generation:",$=f(),_=c("div"),C=h(t.currentGeneration),S=f(),B=c("div"),(M=c("div")).textContent="Mutations:",P=f(),k=c("div"),A=h(t.mutationsCount),V=f(),E=c("div"),(z=c("div")).textContent="Crossovers:",j=f(),G=c("div"),O=h(t.crossoversCount),U=f(),q=c("div"),(D=c("div")).textContent="Best value:",L=f(),N=c("div"),F=h(t.bestValue),W=f(),K=c("div"),J=c("div"),(Q=c("div")).textContent="Ð¡hange of the best result",X=f(),Y=c("div"),Z=c("p"),tt=h(t.bestValuesString),et=f(),nt=c("div"),(at=c("div")).textContent="Best path",it=f(),lt=c("div"),ut=c("p"),ct=h(Et),pt=f(),ht=c("div"),(ft=c("div")).textContent="Best path in current population",dt=f(),gt=c("div"),mt=c("p"),vt=h(t.bestPopulation),bt=f(),wt=c("div"),(yt=c("div")).textContent="Best value in population",xt=f(),$t=c("div"),_t=c("p"),Ct=h(zt),St=f(),Bt=c("div"),(Mt=c("div")).textContent="Population",Pt=f(),kt=c("div");for(let t=0;t<Ot.length;t+=1)Ot[t].c();m(s,"class","stop-watch svelte-1x3fcmm"),m(p,"class","label"),m(g,"class","value svelte-1x3fcmm"),m(r,"class","row svelte-1x3fcmm"),m(x,"class","label"),m(_,"class","value svelte-1x3fcmm"),m(y,"class","row svelte-1x3fcmm"),m(M,"class","label"),m(k,"class","value svelte-1x3fcmm"),m(B,"class","row svelte-1x3fcmm"),m(z,"class","label"),m(G,"class","value svelte-1x3fcmm"),m(E,"class","row svelte-1x3fcmm"),m(D,"class","label svelte-1x3fcmm"),m(N,"class","value svelte-1x3fcmm"),m(q,"class","row row-result svelte-1x3fcmm"),m(n,"class","table svelte-1x3fcmm"),m(Q,"class","label-row svelte-1x3fcmm"),m(Z,"class","svelte-1x3fcmm"),m(Y,"class","value-row svelte-1x3fcmm"),m(J,"class","paths-row svelte-1x3fcmm"),m(at,"class","label-row svelte-1x3fcmm"),m(ut,"class","svelte-1x3fcmm"),m(lt,"class","value-row svelte-1x3fcmm"),m(nt,"class","paths-row svelte-1x3fcmm"),m(ft,"class","label-row svelte-1x3fcmm"),m(mt,"class","svelte-1x3fcmm"),m(gt,"class","value-row svelte-1x3fcmm"),m(ht,"class","paths-row svelte-1x3fcmm"),m(yt,"class","label-row svelte-1x3fcmm"),m(_t,"class","svelte-1x3fcmm"),m($t,"class","value-row svelte-1x3fcmm"),m(wt,"class","paths-row svelte-1x3fcmm"),m(Mt,"class","label-row svelte-1x3fcmm"),m(kt,"class","value-row svelte-1x3fcmm"),m(Bt,"class","paths-row svelte-1x3fcmm"),m(K,"class","paths svelte-1x3fcmm"),m(e,"class","info svelte-1x3fcmm")},m(t,l){i(t,e,l),a(e,n),a(n,s),H(jt,s,null),a(n,o),a(n,r),a(r,p),a(r,d),a(r,g),a(g,v),a(n,w),a(n,y),a(y,x),a(y,$),a(y,_),a(_,C),a(n,S),a(n,B),a(B,M),a(B,P),a(B,k),a(k,A),a(n,V),a(n,E),a(E,z),a(E,j),a(E,G),a(G,O),a(n,U),a(n,q),a(q,D),a(q,L),a(q,N),a(N,F),a(e,W),a(e,K),a(K,J),a(J,Q),a(J,X),a(J,Y),a(Y,Z),a(Z,tt),a(K,et),a(K,nt),a(nt,at),a(nt,it),a(nt,lt),a(lt,ut),a(ut,ct),a(K,pt),a(K,ht),a(ht,ft),a(ht,dt),a(ht,gt),a(gt,mt),a(mt,vt),a(K,bt),a(K,wt),a(wt,yt),a(wt,xt),a(wt,$t),a($t,_t),a(_t,Ct),a(K,St),a(K,Bt),a(Bt,Mt),a(Bt,Pt),a(Bt,kt);for(let t=0;t<Ot.length;t+=1)Ot[t].m(kt,null);At=!0},p(t,e){var n={};if(t.running&&(n.running=e.running),jt.$set(n),At&&!t.graph||Vt===(Vt=e.graph.nodes().length+"")||b(v,Vt),At&&!t.currentGeneration||b(C,e.currentGeneration),At&&!t.mutationsCount||b(A,e.mutationsCount),At&&!t.crossoversCount||b(O,e.crossoversCount),At&&!t.bestValue||b(F,e.bestValue),At&&!t.bestValuesString||b(tt,e.bestValuesString),At&&!t.best||Et===(Et=e.best.toString()+"")||b(ct,Et),At&&!t.bestPopulation||b(vt,e.bestPopulation),At&&!t.currentBest||zt===(zt=e.currentBest.bestValue+"")||b(Ct,zt),t.population){let n;for(Gt=e.population,n=0;n<Gt.length;n+=1){const s=ot(e,Gt,n);Ot[n]?Ot[n].p(t,s):(Ot[n]=rt(s),Ot[n].c(),Ot[n].m(kt,null))}for(;n<Ot.length;n+=1)Ot[n].d(1);Ot.length=Gt.length}},i(t){At||(R(jt.$$.fragment,t),At=!0)},o(t){T(jt.$$.fragment,t),At=!1},d(t){t&&l(e),I(jt),u(Ot,t)}}}function it(t,e,n){let s,o,{running:r,graph:a,currentGeneration:i,mutationsCount:l,crossoversCount:u,bestValue:c,currentBest:p,population:h,best:f,bestValuesArray:d}=e;return t.$set=t=>{"running"in t&&n("running",r=t.running),"graph"in t&&n("graph",a=t.graph),"currentGeneration"in t&&n("currentGeneration",i=t.currentGeneration),"mutationsCount"in t&&n("mutationsCount",l=t.mutationsCount),"crossoversCount"in t&&n("crossoversCount",u=t.crossoversCount),"bestValue"in t&&n("bestValue",c=t.bestValue),"currentBest"in t&&n("currentBest",p=t.currentBest),"population"in t&&n("population",h=t.population),"best"in t&&n("best",f=t.best),"bestValuesArray"in t&&n("bestValuesArray",d=t.bestValuesArray)},t.$$.update=(t={population:1,currentBest:1,bestValuesArray:1})=>{(t.population||t.currentBest)&&n("bestPopulation",s=h[p.bestPosition]?h[p.bestPosition].toString():""),t.bestValuesArray&&n("bestValuesString",o=d.join(" > ").toString())},{running:r,graph:a,currentGeneration:i,mutationsCount:l,crossoversCount:u,bestValue:c,currentBest:p,population:h,best:f,bestValuesArray:d,bestPopulation:s,bestValuesString:o}}class lt extends F{constructor(t){super(),N(this,t,it,at,r,["running","graph","currentGeneration","mutationsCount","crossoversCount","bestValue","currentBest","population","best","bestValuesArray"])}}const ut=Z(0),ct=Z(0);function pt(t){return parseInt(Math.random()*t)}function ht(t){return ut.update(t=>t+1),t}const ft=t=>ht(function(t){return t.reverse()}(t)),dt=t=>ht(function(t){let e,n;do{e=pt(t.length-2),n=pt(t.length)}while(e>=n);for(var s=0,o=n-e+1>>1;s<o;s++)t.swap(e+s,n-s);return t}(t)),gt=t=>ht(function(t){var e,n;do{e=pt(t.length>>1),n=pt(t.length)}while(e>=n);var s=t.slice(0,e),o=t.slice(e,n),r=t.slice(n,t.length);return o.concat(s).concat(r).clone()}(t));function mt(t,e,n,s){let o=n.clone(),r=vt("next",t,e,o,s),a=vt("previous",t,e,o,s);return o[t]=r,o[e]=a,o}function vt(t,e,n,s,o){let r,a,i=new Array,l=s[e].clone(),u=s[n].clone(),c=l[pt(l.length)];for(i.push(c);l.length>1;)r=l[t](l.indexOf(c)),a=u[t](u.indexOf(c)),l.deleteByValue(c),u.deleteByValue(c),c=o[c][r]<o[c][a]?r:a,i.push(c);return i}function bt(t=[]){const e=Math.random();return t.forEach((t,n)=>{if(e<=t)return n}),0}function wt(t){var e,n,o,r,u,p,h,d,v,b,y,x,$,_,C,S,B,M,P,k,A,V,E,z,j,G,O,U,q,D,L=!1,N=!1,F=!1,W=!1;function K(){L=!0,t.input0_input_handler.call(h)}function J(){N=!0,t.input1_input_handler.call(x)}function Q(){F=!0,t.input2_input_handler.call(B)}function X(){W=!0,t.input3_input_handler.call(V)}var Y=new lt({props:{running:t.running,graph:t.graph,currentGeneration:t.currentGeneration,mutationsCount:t.mutationsCount,crossoversCount:t.crossoversCount,bestValue:t.bestValue,currentBest:t.currentBest,population:t.population,best:t.best,bestValuesArray:t.bestValuesArray}});return{c(){e=c("div"),n=c("div"),o=c("div"),r=c("label"),(u=c("span")).textContent="Population size:",p=f(),h=c("input"),d=f(),v=c("label"),(b=c("span")).textContent="Crossover probability:",y=f(),x=c("input"),$=f(),_=c("label"),(C=c("span")).textContent="Mutation probability:",S=f(),B=c("input"),M=f(),P=c("label"),(k=c("span")).textContent="Interval duration:",A=f(),V=c("input"),E=f(),z=c("div"),(j=c("button")).textContent="Start",G=f(),(O=c("button")).textContent="Stop",U=f(),Y.$$.fragment.c(),m(u,"class","svelte-gdz7qb"),m(h,"class","text-input svelte-gdz7qb"),m(h,"type","number"),m(h,"step","1"),m(h,"min","1"),m(h,"max","50"),m(r,"class","svelte-gdz7qb"),m(b,"class","svelte-gdz7qb"),m(x,"class","text-input svelte-gdz7qb"),m(x,"type","number"),m(x,"step","0.1"),m(x,"min","0.01"),m(x,"max","1"),m(v,"class","svelte-gdz7qb"),m(C,"class","svelte-gdz7qb"),m(B,"class","text-input svelte-gdz7qb"),m(B,"type","number"),m(B,"step","0.01"),m(B,"min","0.01"),m(B,"max","1"),m(_,"class","svelte-gdz7qb"),m(k,"class","svelte-gdz7qb"),m(V,"class","text-input svelte-gdz7qb"),m(V,"type","number"),m(V,"step","20"),m(V,"min","10"),m(V,"max","3000"),m(P,"class","svelte-gdz7qb"),m(j,"class","startButton protrude svelte-gdz7qb"),m(O,"class","startButton protrude svelte-gdz7qb"),m(z,"class","buttons svelte-gdz7qb"),m(o,"class","constants svelte-gdz7qb"),m(n,"class","result-wrapper svelte-gdz7qb"),m(e,"class","calculate-block svelte-gdz7qb"),D=[g(h,"input",K),g(x,"input",J),g(B,"input",Q),g(V,"input",X),g(j,"click",t.onStart),g(O,"click",t.onStop)]},m(s,l){i(s,e,l),a(e,n),a(n,o),a(o,r),a(r,u),a(r,p),a(r,h),w(h,t.populationSize),a(o,d),a(o,v),a(v,b),a(v,y),a(v,x),w(x,t.crossoverProbability),a(o,$),a(o,_),a(_,C),a(_,S),a(_,B),w(B,t.mutationProbability),a(o,M),a(o,P),a(P,k),a(P,A),a(P,V),w(V,t.intervalDuration),a(o,E),a(o,z),a(z,j),a(z,G),a(z,O),a(n,U),H(Y,n,null),q=!0},p(t,e){!L&&t.populationSize&&w(h,e.populationSize),L=!1,!N&&t.crossoverProbability&&w(x,e.crossoverProbability),N=!1,!F&&t.mutationProbability&&w(B,e.mutationProbability),F=!1,!W&&t.intervalDuration&&w(V,e.intervalDuration),W=!1;var n={};t.running&&(n.running=e.running),t.graph&&(n.graph=e.graph),t.currentGeneration&&(n.currentGeneration=e.currentGeneration),t.mutationsCount&&(n.mutationsCount=e.mutationsCount),t.crossoversCount&&(n.crossoversCount=e.crossoversCount),t.bestValue&&(n.bestValue=e.bestValue),t.currentBest&&(n.currentBest=e.currentBest),t.population&&(n.population=e.population),t.best&&(n.best=e.best),t.bestValuesArray&&(n.bestValuesArray=e.bestValuesArray),Y.$set(n)},i(t){q||(R(Y.$$.fragment,t),q=!0)},o(t){T(Y.$$.fragment,t),q=!1},d(t){t&&l(e),I(Y),s(D)}}}function yt(t,e,n){const s=S();let o,r,a,i=20,l=.9,u=.1,c=40,{graph:p,stationsBetween:h,dis:f}=e,d=!1,g=0,m=0,b=[],w=[],y={bestPosition:0,bestValue:[]},x=[],$=[];ut.subscribe(t=>n("mutationsCount",r=t)),ct.subscribe(t=>n("crossoversCount",a=t));function _(){n("currentGeneration",g++,g),n("population",x=function(t,e,n,s,o){let r=t.clone(),a=new Array;a.push(r[e.bestPosition]),a.push(dt(n.clone())),a.push(gt(n.clone())),a.push(ft(n.clone())),a.push(n.clone());const i=function(t=[]){const e=t.map(t=>1/t),n=e.reduce((t,e)=>t+=e);let s;return e.map(t=>t/n).map(t=>s=(s||0)+t)}(s);for(let t=5;t<o;t++)a.push(r[bt(i)]);return r=a}(x,y,w,$,i)),n("population",x=function(t,e,n,s){let o=new Array;for(let t=0;t<n;t++)Math.random()<s&&o.push(t);o.shuffle();for(let n=0,s=o.length-1;n<s;n+=2)t=mt(o[n],o[n+1],t,e),ct.update(t=>t+1);return t}(x,f,i,l)),n("population",x=function(t,e,n){let s=t.clone();for(let o=0;o<e;o++)Math.random()<n&&(Math.random()>.5?s[o]=dt(t[o]):s[o]=gt(t[o]),o--);return s}(x,i,u)),C()}function C(){$=x.map(t=>(function(t,e){return t.reduce((t,n,s,o)=>t+=e[n][o[s-1]])})(t,f)),n("currentBest",y=function(t){const e=t.min();return{bestValue:e,bestPosition:t.indexOf(e)}}($)),(void 0===m||m>y.bestValue)&&(n("best",w=x[y.bestPosition].clone()),n("bestValue",m=y.bestValue),n("bestValuesArray",b=[...b,m]))}return t.$set=t=>{"graph"in t&&n("graph",p=t.graph),"stationsBetween"in t&&n("stationsBetween",h=t.stationsBetween),"dis"in t&&n("dis",f=t.dis)},{populationSize:i,crossoverProbability:l,mutationProbability:u,intervalDuration:c,graph:p,stationsBetween:h,dis:f,running:d,currentGeneration:g,bestValue:m,bestValuesArray:b,best:w,currentBest:y,population:x,mutationsCount:r,crossoversCount:a,onStart:function(){d||(n("currentGeneration",g=0),n("bestValue",m=void 0),n("best",w=[]),n("bestValuesArray",b=[]),n("currentBest",y=0),n("population",x=[]),$=new Array(i),ut.update(t=>0),ct.update(t=>0),function(){const t=p.nodes().length;n("population",x=Array.apply(null,Array(i)).map(e=>(function(t){return Array.from(Array(t).keys()).shuffle()})(t))),C()}(),o=setInterval(_,c),n("running",d=!0))},onStop:function(){d&&(clearInterval(o),s("getResult",{result:w}),n("running",d=!1))},input0_input_handler:function(){i=v(this.value),n("populationSize",i)},input1_input_handler:function(){l=v(this.value),n("crossoverProbability",l)},input2_input_handler:function(){u=v(this.value),n("mutationProbability",u)},input3_input_handler:function(){c=v(this.value),n("intervalDuration",c)}}}class xt extends F{constructor(t){super(),N(this,t,yt,wt,r,["graph","stationsBetween","dis"])}}function $t(t,e,n){const s=Object.create(t);return s.station=e[n],s.index=n,s}function _t(t,e,n){const s=Object.create(t);return s.station=e[n],s.indexInside=n,s}function Ct(t,e,n){const s=Object.create(t);return s.gap=e[n],s.index=n,s}function St(t){var e,n,o,r,u,p=t.getStation(t.station).text+"";function h(){return t.mouseenter_handler(t)}return{c(){e=c("div"),o=f(),n=new x(p,o),m(e,"class",r="aside-row__name "+(t.gap.counter-t.gap.stations.length+t.indexInside+1===t.showingRow?"active":"")+" svelte-1olue0"),u=[g(e,"mouseenter",h),g(e,"mouseout",t.disableStationHover)]},m(t,s){i(t,e,s),n.m(e),a(e,o)},p(s,o){t=o,s.resultPath&&p!==(p=t.getStation(t.station).text+"")&&n.p(p),(s.resultPath||s.showingRow)&&r!==(r="aside-row__name "+(t.gap.counter-t.gap.stations.length+t.indexInside+1===t.showingRow?"active":"")+" svelte-1olue0")&&m(e,"class",r)},d(t){t&&l(e),s(u)}}}function Bt(t){var e,n,s,o,r,p,d=t.gap.weight+"";let g=t.gap.stations,v=[];for(let e=0;e<g.length;e+=1)v[e]=St(_t(t,g,e));return{c(){e=c("div"),n=c("div");for(let t=0;t<v.length;t+=1)v[t].c();s=f(),o=c("div"),r=h(d),p=f(),m(n,"class","aside-row__stations svelte-1olue0"),m(o,"class","aside-row__weight svelte-1olue0"),m(e,"class","aside-row svelte-1olue0")},m(t,l){i(t,e,l),a(e,n);for(let t=0;t<v.length;t+=1)v[t].m(n,null);a(e,s),a(e,o),a(o,r),a(e,p)},p(t,e){if(t.resultPath||t.showingRow||t.getStation){let s;for(g=e.gap.stations,s=0;s<g.length;s+=1){const o=_t(e,g,s);v[s]?v[s].p(t,o):(v[s]=St(o),v[s].c(),v[s].m(n,null))}for(;s<v.length;s+=1)v[s].d(1);v.length=g.length}t.resultPath&&d!==(d=e.gap.weight+"")&&b(r,d)},d(t){t&&l(e),u(v,t)}}}function Mt(t){var e,n,s,o,r,u,c,h,f=t.station.path+"",d=t.station.stop+"",g=t.station.text+"";return{c(){e=p("g"),n=p("g"),o=p("g"),u=p("text"),m(n,"fill","none"),m(n,"stroke-miterlimit","10"),m(n,"stroke-width","28"),m(n,"stroke",s=t.colors[t.station.color]),m(o,"fill",r=t.colors[t.station.color]),m(u,"style",c=t.station.style),m(e,"class",h="station "+(t.showingStation==t.station.id?"fadein":"")+" svelte-1olue0")},m(t,s){i(t,e,s),a(e,n),n.innerHTML=f,a(e,o),o.innerHTML=d,a(e,u),u.innerHTML=g},p(t,a){t.stationsPath&&f!==(f=a.station.path+"")&&(n.innerHTML=f),t.stationsPath&&s!==(s=a.colors[a.station.color])&&m(n,"stroke",s),t.stationsPath&&d!==(d=a.station.stop+"")&&(o.innerHTML=d),t.stationsPath&&r!==(r=a.colors[a.station.color])&&m(o,"fill",r),t.stationsPath&&g!==(g=a.station.text+"")&&(u.innerHTML=g),t.stationsPath&&c!==(c=a.station.style)&&m(u,"style",c),(t.showingStation||t.stationsPath)&&h!==(h="station "+(a.showingStation==a.station.id?"fadein":"")+" svelte-1olue0")&&m(e,"class",h)},d(t){t&&l(e)}}}function Pt(t,e){var n,s,o=e.station&&Mt(e);return{key:t,first:null,c(){n=d(),o&&o.c(),s=d(),this.first=n},m(t,e){i(t,n,e),o&&o.m(t,e),i(t,s,e)},p(t,e){e.station?o?o.p(t,e):((o=Mt(e)).c(),o.m(s.parentNode,s)):o&&(o.d(1),o=null)},d(t){t&&l(n),o&&o.d(t),t&&l(s)}}}function kt(e){var n,s,o,r,d,v,b,w,y,x,$,_,C,S,B,M,P,k,A,V,E,z,j,G,O,U,q=[],T=new Map;let H=e.resultPath,I=[];for(let t=0;t<H.length;t+=1)I[t]=Bt(Ct(e,H,t));let L=e.stationsPath;const N=t=>t.station.id;for(let t=0;t<L.length;t+=1){let n=$t(e,L,t),s=N(n);T.set(s,q[t]=Pt(s,n))}return{c(){n=c("div"),s=c("aside"),(o=c("button")).textContent="Play",r=f();for(let t=0;t<I.length;t+=1)I[t].c();d=f(),v=p("svg"),b=p("defs"),w=p("symbol"),y=p("path"),x=p("path"),$=p("path"),_=p("g"),C=p("text"),S=h("Ð¥Ð¾Ð»Ð¾Ð´Ð½Ð¾Ð³ÑÑÑÑÐºÐ¾-Ð·Ð°Ð²Ð¾Ð´ÑÑÐºÐ° Ð»ÑÐ½ÑÑ\n      "),B=p("text"),M=h("Ð¡Ð°Ð»ÑÑÐ²ÑÑÐºÐ° Ð»ÑÐ½ÑÑ\n      "),P=p("text"),k=h("ÐÐ»ÐµÐºÑÑÑÐ²ÑÑÐºÐ° Ð»ÑÐ½ÑÑ\n      "),A=p("g");for(let t=0;t<q.length;t+=1)q[t].c();V=p("g"),E=p("text"),z=h("ÐÐµÑÐ¶Ð°Ð²iÐ½ÑÑÐºÐ°"),j=p("text"),G=h("ÐÐ´ÐµÑÑÐºÐ°"),m(o,"class","start-button svelte-1olue0"),m(s,"class","svelte-1olue0"),m(y,"fill","#fff"),m(y,"d","M6.6 11.5a4.9 4.9 0 110-9.8A4.8 4.8 0 019.7 3a9.7 9.7 0 004.5\n          2v3.5a9.7 9.7 0 00-3.9 1.6l-.9.6a4.8 4.8 0 01-2.8 1z"),m(x,"d","M6.7 3.5a3 3 0 012 .7 11.5 11.5 0 003.7 2V7a11.4 11.4 0 00-3.1\n          1.6l-.9.6a3 3 0 01-1.8.6 3.1 3.1 0 110-6.3m0-3.5A6.6 6.6 0 000 6.6a6.6\n          6.6 0 006.6 6.7 6.5 6.5 0 003.8-1.3l.9-.6a8 8 0 014.6-1.4V3.3a8 8 0\n          01-5-1.8A6.5 6.5 0 006.6 0z"),m(w,"id","w"),m($,"fill","none"),m($,"stroke",e.colors.green),m($,"stroke-width","3"),m($,"d","M747 1310l-18-18-241 241a72 72 0 00-21 51v85h-15v21h56v-21h-16v-85a47\n      47 0 0114-34l46-45 12 12 15-15-12-12z"),m(C,"fill",e.colors.red),m(C,"transform","rotate(-90 1562.5 515.7)"),m(B,"fill",e.colors.blue),m(B,"transform","rotate(-90 700.6 -347.6)"),m(P,"fill",e.colors.green),m(P,"transform","rotate(-90 415.7 -32.8)"),m(_,"font-size","34"),m(A,"fill",e.colors.text),m(A,"font-size","53"),m(E,"transform","translate(573 1556)"),m(j,"transform","translate(519 1690)"),m(V,"fill",e.colors.textDisable),m(V,"font-size","53"),m(v,"xmlns","http://www.w3.org/2000/svg"),m(v,"xmlns:xlink","http://www.w3.org/1999/xlink"),m(v,"class",O="map "+(e.isMapActive?"map-active":"")+" svelte-1olue0"),m(v,"font-family","Tahoma"),m(v,"viewBox","0 0 1501 2151"),m(n,"class","container svelte-1olue0"),U=g(o,"click",e.onPlay)},m(t,e){i(t,n,e),a(n,s),a(s,o),a(s,r);for(let t=0;t<I.length;t+=1)I[t].m(s,null);a(n,d),a(n,v),a(v,b),a(b,w),a(w,y),a(w,x),a(v,$),a(v,_),a(_,C),a(C,S),a(_,B),a(B,M),a(_,P),a(P,k),a(v,A);for(let t=0;t<q.length;t+=1)q[t].m(A,null);a(v,V),a(V,E),a(E,z),a(V,j),a(j,G)},p(t,e){if(t.resultPath||t.showingRow||t.getStation){let n;for(H=e.resultPath,n=0;n<H.length;n+=1){const o=Ct(e,H,n);I[n]?I[n].p(t,o):(I[n]=Bt(o),I[n].c(),I[n].m(s,null))}for(;n<I.length;n+=1)I[n].d(1);I.length=H.length}const n=e.stationsPath;q=function(t,e,n,s,o,r,a,i,l,u,c,p){let h=t.length,f=r.length,d=h;const g={};for(;d--;)g[t[d].key]=d;const m=[],v=new Map,b=new Map;for(d=f;d--;){const t=p(o,r,d),i=n(t);let l=a.get(i);l?s&&l.p(e,t):(l=u(i,t)).c(),v.set(i,m[d]=l),i in g&&b.set(i,Math.abs(d-g[i]))}const w=new Set,y=new Set;function x(t){R(t,1),t.m(i,c),a.set(t.key,t),c=t.first,f--}for(;h&&f;){const e=m[f-1],n=t[h-1],s=e.key,o=n.key;e===n?(c=e.first,h--,f--):v.has(o)?!a.has(s)||w.has(s)?x(e):y.has(o)?h--:b.get(s)>b.get(o)?(y.add(s),x(e)):(w.add(o),h--):(l(n,a),h--)}for(;h--;){const e=t[h];v.has(e.key)||l(e,a)}for(;f;)x(m[f-1]);return m}(q,t,N,1,e,n,T,A,D,Pt,null,$t),t.isMapActive&&O!==(O="map "+(e.isMapActive?"map-active":"")+" svelte-1olue0")&&m(v,"class",O)},i:t,o:t,d(t){t&&l(n),u(I,t);for(let t=0;t<q.length;t+=1)q[t].d();U()}}}const At=200;function Vt(t,e,n){let s,o,{stationsBetween:r,path:a,stations:i}=e,l=!0,u=[],c=[],p=null;function h(t,e){f(),d(t),n("showingRow",p=null)}function f(){n("showingRow",p=null),clearInterval(s)}function d(t){n("isMapActive",l=!1),n("showingStation",o=t)}function g(){n("isMapActive",l=!0),n("showingStation",o=null)}function m({path:t=[],stationsBetween:e}){let s=[];return n("resultPath",u=function({path:t=[],stationsBetween:e}){let n=new Array(t.length),s=0;for(let o=1;o<t.length;o++){const r=t[o-1],a=t[o],i=e[r][a];s+=i.length-1,n[o]={stations:i.slice(1),weight:i.weight,counter:s}}return n[0]={stations:[t[0].toString()],weight:0,counter:0},n}({path:t,stationsBetween:e})),u.map(t=>{t.stations.map(t=>{s.push(i.find(e=>e.id==t))})}),s}const v=t=>i.find(e=>e.id==t)||{};return t.$set=t=>{"stationsBetween"in t&&n("stationsBetween",r=t.stationsBetween),"path"in t&&n("path",a=t.path),"stations"in t&&n("stations",i=t.stations)},t.$$.update=(t={path:1,stationsBetween:1})=>{(t.path||t.stationsBetween)&&n("stationsPath",c=m({path:a,stationsBetween:r}))},{stationsBetween:r,path:a,stations:i,isMapActive:l,resultPath:u,stationsPath:c,showingStation:o,showingRow:p,onStationHover:h,onPlay:function(){f(),function(){let t=0;s=setInterval(()=>{t<c.length?(d(c[t].id),n("showingRow",p=t),t++):(f(),g())},At)}()},disableStationHover:g,getStation:v,colors:{red:"#d22531",blue:"#2060ba",green:"#41a747",text:"#09303b",textDisable:"#9c98a6"},mouseenter_handler:({station:t})=>h(v(t).id)}}class Et extends F{constructor(t){super(),N(this,t,Vt,kt,r,["stationsBetween","path","stations"])}}function zt(e){var n,o,r,u,p,d,v,b,w;return{c(){n=c("section"),o=c("label"),r=c("input"),u=h("\n    Kharkiv metro"),p=f(),d=c("label"),v=c("input"),b=h("\n    Other metro"),e.$$binding_groups[0].push(r),m(r,"type","radio"),r.__value="kharkiv",r.value=r.__value,e.$$binding_groups[0].push(v),m(v,"type","radio"),v.__value="custom",v.value=v.__value,m(n,"class","svelte-1sgfbb2"),w=[g(r,"change",e.input0_change_handler),g(r,"change",e.onChange),g(v,"change",e.input1_change_handler),g(v,"change",e.onChange)]},m(t,s){i(t,n,s),a(n,o),a(o,r),r.checked=r.__value===e.selectedMetro,a(o,u),a(n,p),a(n,d),a(d,v),v.checked=v.__value===e.selectedMetro,a(d,b)},p(t,e){t.selectedMetro&&(r.checked=r.__value===e.selectedMetro),t.selectedMetro&&(v.checked=v.__value===e.selectedMetro)},i:t,o:t,d(t){t&&l(n),e.$$binding_groups[0].splice(e.$$binding_groups[0].indexOf(r),1),e.$$binding_groups[0].splice(e.$$binding_groups[0].indexOf(v),1),s(w)}}}function jt(t,e,n){const s=S();let{selectedMetro:o}=e;const r={kharkiv:{graphUrl:"https://metro.kh.ua/metroapi.php?value=path",stationsUrl:"https://metro.kh.ua/metroapi.php?value=stations"},custom:{graphUrl:null,stationsUrl:null}};return t.$set=t=>{"selectedMetro"in t&&n("selectedMetro",o=t.selectedMetro)},{selectedMetro:o,onChange:function(){const t=r[o];s("onSelectMetro",{result:o,graphUrl:t&&t.graphUrl,stationsUrl:t&&t.stationsUrl})},input0_change_handler:function(){o=this.__value,n("selectedMetro",o)},input1_change_handler:function(){o=this.__value,n("selectedMetro",o)},$$binding_groups:[[]]}}class Gt extends F{constructor(t){super(),N(this,t,jt,zt,r,["selectedMetro"])}}function Ot(e){var n,o,r,u,p;return{c(){n=c("section"),o=c("input"),r=f(),(u=c("button")).textContent="Send",m(o,"class","json-input svelte-1fcxvpp"),m(o,"type","text"),m(u,"class","json-button svelte-1fcxvpp"),m(n,"class","svelte-1fcxvpp"),p=[g(o,"input",e.input_input_handler),g(u,"click",e.onSubmit)]},m(t,s){i(t,n,s),a(n,o),w(o,e.jsonUrl),a(n,r),a(n,u)},p(t,e){t.jsonUrl&&o.value!==e.jsonUrl&&w(o,e.jsonUrl)},i:t,o:t,d(t){t&&l(n),s(p)}}}function Ut(t,e,n){const s=S();let o;return{jsonUrl:o,onSubmit:function(){s("onSubmitGraph",{graphUrl:o,stationsUrl:""})},input_input_handler:function(){o=this.value,n("jsonUrl",o)}}}class qt extends F{constructor(t){super(),N(this,t,Ut,Ot,r,[])}}var Rt=function(t){var e={addNode:o,removeNode:function(t){return Object.keys(n).forEach((function(e){n[e].forEach((function(n){n===t&&p(e,n)}))})),delete n[t],e},nodes:r,adjacent:a,addEdge:c,removeEdge:p,setEdgeWeight:l,getEdgeWeight:u,indegree:function(t){var e=0;function s(n){n===t&&e++}return Object.keys(n).forEach((function(t){n[t].forEach(s)})),e},outdegree:function(t){return t in n?n[t].length:0},depthFirstSearch:h,lowestCommonAncestors:function(t,e){var n=[],s=[];(function t(o,r){return!!o[r]||(o[r]=!0,n.push(r),r==e?(s.push(r),!1):a(r).every(e=>t(o,e)))})({},t)&&function t(e,o){e[o]||(e[o]=!0,n.indexOf(o)>=0?s.push(o):0==s.length&&a(o).forEach(n=>{t(e,n)}))}({},e);return s},topologicalSort:function(t,e){return h(t,e).reverse()},shortestPath:function(t,e){var n={},s={},o={};function i(){var t,e=1/0;return Object.keys(o).forEach((function(s){n[s]<e&&(e=n[s],t=s)})),void 0===t?(o={},null):(delete o[t],t)}function l(t,e){var o=u(t,e);n[e]>n[t]+o&&(n[e]=n[t]+o,s[e]=t)}return function(){(function(){if(r().forEach((function(t){n[t]=1/0})),n[t]!==1/0)throw new Error("Source node is not in the graph");if(n[e]!==1/0)throw new Error("Destination node is not in the graph");n[t]=0})(),r().forEach((function(t){o[t]=!0}));for(;0!==Object.keys(o).length;){var s=i();a(s).forEach((function(t){l(s,t)}))}}(),function(){var n=[],o=0,r=e;for(;s[r];)n.push(r),o+=u(s[r],r),r=s[r];if(r!==t)throw new Error("No path found");return n.push(r),n.reverse(),n.weight=o,n}()},serialize:function(){var t={nodes:r().map((function(t){return{id:t}})),links:[]};return t.nodes.forEach((function(e){var n=e.id;a(n).forEach((function(e){t.links.push({source:n,target:e,weight:u(n,e)})}))})),t},deserialize:f},n={},s={};function o(t){return n[t]=a(t),e}function r(){var t={};return Object.keys(n).forEach((function(e){t[e]=!0,n[e].forEach((function(e){t[e]=!0}))})),Object.keys(t)}function a(t){return n[t]||[]}function i(t,e){return t+"|"+e}function l(t,n,o){return s[i(t,n)]=o,e}function u(t,e){var n=s[i(t,e)];return void 0===n?1:n}function c(t,n,s){return o(t),o(n),a(t).push(n),void 0!==s&&l(t,n,s),e}function p(t,s){return n[t]&&(n[t]=a(t).filter((function(t){return t!==s}))),e}function h(t,e){t||(t=r()),"boolean"!=typeof e&&(e=!0);var n={},s=[];function o(t){n[t]||(n[t]=!0,a(t).forEach(o),s.push(t))}return e?t.forEach(o):(t.forEach((function(t){n[t]=!0})),t.forEach((function(t){a(t).forEach(o)}))),s}function f(t){return t.nodes.forEach((function(t){o(t.id)})),t.links.forEach((function(t){c(t.source,t.target,t.weight)})),e}return(t&&f(t),e)};function Tt(t){const e=6;function n(t){return t+e}const s=Rt();t.map(t=>({...t,weight:n(t.weight)})).map(t=>{s.addEdge(t.from,t.to,t.weight),s.addEdge(t.to,t.from,t.weight)});let o=[];s.nodes().map((t,e)=>{o.push([]),s.nodes().map((n,r)=>{const a=s.shortestPath(t,n);o[e].push(a)})}),s.nodes().map((t,e)=>{s.nodes().map((e,n)=>{const o=s.shortestPath(t,e);s.addEdge(t,e,o.weight)})});const r=function(t){const e=t.nodes(),n=e.length;return Array.apply(null,Array(n)).map((s,o)=>Array.apply(null,Array(n)).map((n,s)=>~~t.getEdgeWeight(e[o],e[s])))}(s);return{graph:s,stationsBetween:o,distances:r}}let Dt={};async function Ht(t,e){if(Dt[t])return Dt[t];const n=await e();return Dt[t]=n,n}function It(t){var e,n=new qt({});return n.$on("onSubmitGraph",t.onGetUserGraph),{c(){n.$$.fragment.c()},m(t,s){H(n,t,s),e=!0},i(t){e||(R(n.$$.fragment,t),e=!0)},o(t){T(n.$$.fragment,t),e=!1},d(t){I(n,t)}}}function Lt(t){var e,n=new xt({props:{graph:t.graph,stationsBetween:t.stationsBetween,dis:t.dis}});return n.$on("getResult",t.getResult),{c(){n.$$.fragment.c()},m(t,s){H(n,t,s),e=!0},p(t,e){var s={};t.graph&&(s.graph=e.graph),t.stationsBetween&&(s.stationsBetween=e.stationsBetween),t.dis&&(s.dis=e.dis),n.$set(s)},i(t){e||(R(n.$$.fragment,t),e=!0)},o(t){T(n.$$.fragment,t),e=!1},d(t){I(n,t)}}}function Nt(t){var e,n=new Et({props:{path:t.bestPath,stationsBetween:t.stationsBetween,stations:t.stations}});return{c(){n.$$.fragment.c()},m(t,s){H(n,t,s),e=!0},p(t,e){var s={};t.bestPath&&(s.path=e.bestPath),t.stationsBetween&&(s.stationsBetween=e.stationsBetween),t.stations&&(s.stations=e.stations),n.$set(s)},i(t){e||(R(n.$$.fragment,t),e=!0)},o(t){T(n.$$.fragment,t),e=!1},d(t){I(n,t)}}}function Ft(t){var e,n,s,o,r,u,p,h=new Gt({props:{selectedMetro:t.selectedMetro}});h.$on("onSelectMetro",t.onSelectMetro);var d=t.isCustomShowed&&It(t),g=t.graph&&t.stationsBetween&&t.dis&&t.isCalculateShowed&&Lt(t),m=t.stations&&t.bestPath&&Nt(t);return{c(){(e=c("header")).innerHTML="<h1>Transit challenge solver</h1> <p>For Kharkiv metropoliten</p>",n=f(),s=c("main"),h.$$.fragment.c(),o=f(),d&&d.c(),r=f(),g&&g.c(),u=f(),m&&m.c()},m(t,l){i(t,e,l),i(t,n,l),i(t,s,l),H(h,s,null),a(s,o),d&&d.m(s,null),a(s,r),g&&g.m(s,null),a(s,u),m&&m.m(s,null),p=!0},p(t,e){var n={};t.selectedMetro&&(n.selectedMetro=e.selectedMetro),h.$set(n),e.isCustomShowed?d?R(d,1):((d=It(e)).c(),R(d,1),d.m(s,r)):d&&(U(),T(d,1,1,()=>{d=null}),q()),e.graph&&e.stationsBetween&&e.dis&&e.isCalculateShowed?g?(g.p(t,e),R(g,1)):((g=Lt(e)).c(),R(g,1),g.m(s,u)):g&&(U(),T(g,1,1,()=>{g=null}),q()),e.stations&&e.bestPath?m?(m.p(t,e),R(m,1)):((m=Nt(e)).c(),R(m,1),m.m(s,null)):m&&(U(),T(m,1,1,()=>{m=null}),q())},i(t){p||(R(h.$$.fragment,t),R(d),R(g),R(m),p=!0)},o(t){T(h.$$.fragment,t),T(d),T(g),T(m),p=!1},d(t){t&&(l(e),l(n),l(s)),I(h),d&&d.d(),g&&g.d(),m&&m.d()}}}function Wt(t,e,n){let s,o,r,a,i,l,u,c,p=!1,h=!1;async function f(t){const e=await Ht(`${r}-graphData`,()=>(async function(t){const e=await fetch(t);return Tt(await e.json())})(t));n("graph",l=e.graph),n("stationsBetween",u=e.stationsBetween),n("dis",c=e.distances)}async function d(t){const e=await Ht(`${r}-stations`,()=>(async function(t){const e=await fetch(t);return await e.json()})(t));n("stations",i=e)}async function g(){s&&await f(s),n("isCalculateShowed",p=!0),o&&await d(o)}return{selectedMetro:r,bestPath:a,stations:i,graph:l,stationsBetween:u,dis:c,isCalculateShowed:p,isCustomShowed:h,onSelectMetro:function(t){return n("selectedMetro",r=t.detail.result),s=t.detail.graphUrl,o=t.detail.stationsUrl,n("bestPath",a=null),n("stations",i=null),n("isCalculateShowed",p=!1),s||o?(g(),n("isCustomShowed",h=!1)):n("isCustomShowed",h=!0)},getResult:function(t){n("bestPath",a=t.detail.result)},onGetUserGraph:async function(t){s=t.detail.graphUrl,o=t.detail.stationsUrl,g()}}}return Array.prototype.clone=function(){return this.slice(0)},Array.prototype.max=function(){return Math.max.apply(null,this)},Array.prototype.min=function(){return Math.min.apply(null,this)},Array.prototype.shuffle=function(){if(!this.length)return this;for(var t,e,n=this.length-1;n;t=pt(n),e=this[--n],this[n]=this[t],this[t]=e);return this},Array.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e},Array.prototype.deleteByValue=function(t){var e=this.indexOf(t);this.splice(e,1)},Array.prototype.next=function(t){return t===this.length-1?this[0]:this[t+1]},Array.prototype.previous=function(t){return 0===t?this[this.length-1]:this[t-1]},Array.prototype.swap=function(t,e){if(!(t>this.length||e>this.length||t===e)){var n=this[t];this[t]=this[e],this[e]=n}},Array.prototype.roll=function(){for(var t=pt(this.length),e=[],n=t;n<this.length;n++)e.push(this[n]);for(n=0;n<t;n++)e.push(this[n]);return e},new class extends F{constructor(t){super(),N(this,t,Wt,Ft,r,[])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
