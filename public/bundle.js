var app=function(){"use strict";function t(){}const n=t=>t;function e(t){return t()}function s(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function i(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}const a="undefined"!=typeof window;let l=a?()=>window.performance.now():()=>Date.now(),u=a?t=>requestAnimationFrame(t):t;const c=new Set;let h,f=!1;function p(){c.forEach(t=>{t[0](l())||(c.delete(t),t[1]())}),(f=c.size>0)&&u(p)}function d(t){let n;return f||(f=!0,u(p)),{promise:new Promise(e=>{c.add(n=[t,e])}),abort(){c.delete(n)}}}function g(t,n){t.appendChild(n)}function m(t,n,e){t.insertBefore(n,e||null)}function v(t){t.parentNode.removeChild(t)}function b(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}function w(t){return document.createElement(t)}function y(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function $(t){return document.createTextNode(t)}function x(){return $(" ")}function _(){return $("")}function C(t,n,e,s){return t.addEventListener(n,e,s),()=>t.removeEventListener(n,e,s)}function S(t,n,e){null==e?t.removeAttribute(n):t.setAttribute(n,e)}function B(t){return""===t?void 0:+t}function P(t,n){n=""+n,t.data!==n&&(t.data=n)}function A(t,n){(null!=n||t.value)&&(t.value=n)}function k(t,n,e,s){t.style.setProperty(n,e,s?"important":"")}function V(t,n){const e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,n),e}class E{constructor(t,n=null){this.e=w("div"),this.a=n,this.u(t)}m(t,n=null){for(let e=0;e<this.n.length;e+=1)m(t,this.n[e],n);this.t=t}u(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}p(t){this.d(),this.u(t),this.m(this.t,this.a)}d(){this.n.forEach(v)}}let M,z=0,O={};function j(t,n){t.style.animation=(t.style.animation||"").split(", ").filter(n?t=>t.indexOf(n)<0:t=>-1===t.indexOf("__svelte")).join(", "),n&&!--z&&u(()=>{if(z)return;let t=h.cssRules.length;for(;t--;)h.deleteRule(t);O={}})}function G(t){M=t}function U(){if(!M)throw new Error("Function called outside component initialization");return M}function q(t){U().$$.on_destroy.push(t)}function R(){const t=M;return(n,e)=>{const s=t.$$.callbacks[n];if(s){const o=V(n,e);s.slice().forEach(n=>{n.call(t,o)})}}}const T=[],D=[],I=[],H=[],L=Promise.resolve();let N,F=!1;function W(t){I.push(t)}function K(){const t=new Set;do{for(;T.length;){const t=T.shift();G(t),J(t.$$)}for(;D.length;)D.pop()();for(let n=0;n<I.length;n+=1){const e=I[n];t.has(e)||(e(),t.add(e))}I.length=0}while(T.length);for(;H.length;)H.pop()();F=!1}function J(t){t.fragment&&(t.update(t.dirty),o(t.before_update),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(W))}function Q(t,n,e){t.dispatchEvent(V(`${n?"intro":"outro"}${e}`))}const X=new Set;let Y;function Z(){Y={r:0,c:[],p:Y}}function tt(){Y.r||o(Y.c),Y=Y.p}function nt(t,n){t&&t.i&&(X.delete(t),t.i(n))}function et(t,n,e,s){if(t&&t.o){if(X.has(t))return;X.add(t),Y.c.push(()=>{X.delete(t),s&&(e&&t.d(1),s())}),t.o(n)}}const st={duration:0};function ot(e,s,o){let i,a,u=s(e,o),c=!1,f=0;function p(){i&&j(e,i)}function g(){const{delay:s=0,duration:o=300,easing:r=n,tick:g=t,css:m}=u||st;m&&(i=function(t,n,e,s,o,r,i,a=0){const l=16.666/s;let u="{\n";for(let t=0;t<=1;t+=l){const s=n+(e-n)*r(t);u+=100*t+`%{${i(s,1-s)}}\n`}const c=u+`100% {${i(e,1-e)}}\n}`,f=`__svelte_${function(t){let n=5381,e=t.length;for(;e--;)n=(n<<5)-n^t.charCodeAt(e);return n>>>0}(c)}_${a}`;if(!O[f]){if(!h){const t=w("style");document.head.appendChild(t),h=t.sheet}O[f]=!0,h.insertRule(`@keyframes ${f} ${c}`,h.cssRules.length)}const p=t.style.animation||"";return t.style.animation=`${p?`${p}, `:""}${f} ${s}ms linear ${o}ms 1 both`,z+=1,f}(e,0,1,o,s,r,m,f++)),g(0,1);const v=l()+s,b=v+o;a&&a.abort(),c=!0,W(()=>Q(e,!0,"start")),a=d(t=>{if(c){if(t>=b)return g(1,0),Q(e,!0,"end"),p(),c=!1;if(t>=v){const n=r((t-v)/o);g(n,1-n)}}return c})}let m=!1;return{start(){m||(j(e),r(u)?(u=u(),(N||(N=Promise.resolve()).then(()=>{N=null}),N).then(g)):g())},invalidate(){m=!1},end(){c&&(p(),c=!1)}}}function rt(t,n){t.d(1),n.delete(t.key)}function it(t,n,s){const{fragment:i,on_mount:a,on_destroy:l,after_update:u}=t.$$;i.m(n,s),W(()=>{const n=a.map(e).filter(r);l?l.push(...n):o(n),t.$$.on_mount=[]}),u.forEach(W)}function at(t,n){t.$$.fragment&&(o(t.$$.on_destroy),t.$$.fragment.d(n),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={})}function lt(t,n){t.$$.dirty||(T.push(t),F||(F=!0,L.then(K)),t.$$.dirty=s()),t.$$.dirty[n]=!0}function ut(n,e,r,i,a,l){const u=M;G(n);const c=e.props||{},h=n.$$={fragment:null,ctx:null,props:l,update:t,not_equal:a,bound:s(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:s(),dirty:null};let f=!1;h.ctx=r?r(n,c,(t,e,s=e)=>(h.ctx&&a(h.ctx[t],h.ctx[t]=s)&&(h.bound[t]&&h.bound[t](s),f&&lt(n,t)),e)):c,h.update(),f=!0,o(h.before_update),h.fragment=i(h.ctx),e.target&&(e.hydrate?h.fragment.l(function(t){return Array.from(t.childNodes)}(e.target)):h.fragment.c(),e.intro&&nt(n.$$.fragment),it(n,e.target,e.anchor),K()),G(u)}class ct{$destroy(){at(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(){}}function ht(t){const n=t-1;return n*n*n+1}function ft(t,{delay:n=0,duration:e=400,easing:s=ht,x:o=0,y:r=0,opacity:i=0}){const a=getComputedStyle(t),l=+a.opacity,u="none"===a.transform?"":a.transform,c=l*(1-i);return{delay:n,duration:e,easing:s,css:(t,n)=>`\n\t\t\ttransform: ${u} translate(${(1-t)*o}px, ${(1-t)*r}px);\n\t\t\topacity: ${l-c*n}`}}function pt(t){return t>=10?t.toString():`0${t}`}function dt(t){return`${pt(Math.floor(t/1e3/60))}:${pt(Math.floor(t/1e3)%60)}.${Math.floor(t/10).toString().slice(-2)}`}function gt(n){var e,s,o,r,i,a,l,u,c,h,f,p,d,b,w,x=dt(n.lapse)+"";return{c(){e=y("svg"),s=y("g"),o=y("circle"),r=y("g"),i=y("g"),a=y("path"),u=y("g"),c=y("g"),h=y("path"),p=y("circle"),d=y("circle"),b=y("text"),w=$(x),S(o,"cx","0"),S(o,"cy","0"),S(o,"r","42"),S(o,"fill","none"),S(o,"stroke","currentColor"),S(o,"stroke-width","6"),S(o,"stroke-dasharray","0.3 1.898"),S(o,"transform","scale(-1 1)"),S(a,"d","M -2.25 0 h 4.5 l -2.25 2.5 l -2.25 -2.5"),S(a,"fill","currentColor"),S(a,"stroke","currentColor"),S(a,"stroke-width","1"),S(a,"stroke-linejoin","round"),S(a,"stroke-linecap","round"),S(i,"transform","translate(0 -50)"),S(r,"transform",l="rotate("+n.rotation+")"),S(h,"d","M 0 -1 v -7.5"),S(h,"stroke-linejoin","round"),S(h,"stroke-linecap","round"),S(c,"transform",f="rotate("+60*n.rotation%360+")"),S(p,"r","9"),S(d,"r","1"),S(u,"transform","translate(0 20)"),S(u,"stroke","currentColor"),S(u,"stroke-width","0.4"),S(u,"fill","none"),S(b,"text-anchor","middle"),S(b,"fill","currentColor"),S(b,"dominant-baseline","middle"),S(b,"font-size","14"),k(b,"font-weight","300"),k(b,"letter-spacing","1px"),S(s,"transform","translate(50 50)"),S(e,"viewBox","0 0 100 100"),S(e,"width","200"),S(e,"height","200"),S(e,"class","svelte-1gye13z")},m(t,l){m(t,e,l),g(e,s),g(s,o),g(s,r),g(r,i),g(i,a),n.g1_binding(r),g(s,u),g(u,c),g(c,h),n.g2_binding(c),g(u,p),g(u,d),g(s,b),g(b,w)},p(t,n){t.rotation&&l!==(l="rotate("+n.rotation+")")&&S(r,"transform",l),t.rotation&&f!==(f="rotate("+60*n.rotation%360+")")&&S(c,"transform",f),t.lapse&&x!==(x=dt(n.lapse)+"")&&P(w,x)},i:t,o:t,d(t){t&&v(e),n.g1_binding(null),n.g2_binding(null)}}}function mt(t,n,e){let s,o,r,i,{lapse:a=0}=n;return t.$set=t=>{"lapse"in t&&e("lapse",a=t.lapse)},t.$$.update=(t={lapse:1,minutes:1,seconds:1,transitioned:1})=>{t.lapse&&e("rotation",i=a/1e3/60*360%360),(t.lapse||t.minutes||t.seconds)&&!a&&o&&s&&(e("minutes",o.style.transition="transform 0.2s ease-in-out",o),e("seconds",s.style.transition="transform 0.2s ease-in-out",s),e("transitioned",r=!1)),(t.lapse||t.transitioned)&&a&&!r&&(e("minutes",o.style.transition="none",o),e("seconds",s.style.transition="none",s),e("transitioned",r=!0))},{lapse:a,seconds:s,minutes:o,rotation:i,g1_binding:function(t){D[t?"unshift":"push"](()=>{e("minutes",o=t)})},g2_binding:function(t){D[t?"unshift":"push"](()=>{e("seconds",s=t)})}}}class vt extends ct{constructor(t){super(),ut(this,t,mt,gt,i,["lapse"])}}const bt=[];function wt(n,e=t){let s;const o=[];function r(t){if(i(n,t)&&(n=t,s)){const t=!bt.length;for(let t=0;t<o.length;t+=1){const e=o[t];e[1](),bt.push(e,n)}if(t){for(let t=0;t<bt.length;t+=2)bt[t][0](bt[t+1]);bt.length=0}}}return{set:r,update:function(t){r(t(n))},subscribe:function(i,a=t){const l=[i,a];return o.push(l),1===o.length&&(s=e(r)||t),i(n),()=>{const t=o.indexOf(l);-1!==t&&o.splice(t,1),0===o.length&&(s(),s=null)}}}}const yt={subscribe:wt(0,(function(t){const n=(new Date).getTime(),e=setInterval(()=>{const e=(new Date).getTime();t(e-n)},10);return function(){t(0),clearInterval(e)}})).subscribe};function $t(t){var n,e,s=new vt({props:{lapse:t.lapse}});return{c(){n=w("div"),s.$$.fragment.c(),S(n,"class","stopwatch")},m(t,o){m(t,n,o),it(s,n,null),e=!0},p(t,n){var e={};t.lapse&&(e.lapse=n.lapse),s.$set(e)},i(t){e||(nt(s.$$.fragment,t),e=!0)},o(t){et(s.$$.fragment,t),e=!1},d(t){t&&v(n),at(s)}}}function xt(t,n,e){let s,{running:o=!1}=n,r=0;function i(){s&&(s(),s=null)}return q(()=>{i()}),t.$set=t=>{"running"in t&&e("running",o=t.running)},t.$$.update=(t={running:1})=>{t.running&&(o?(e("lapse",r=0),i(),s=yt.subscribe(t=>{e("lapse",r=t)})):i())},{running:o,lapse:r}}class _t extends ct{constructor(t){super(),ut(this,t,xt,$t,i,["running"])}}function Ct(t,n,e){const s=Object.create(t);return s.item=n[e],s}function St(t){var n,e,s=t.item.toString()+"";return{c(){n=w("p"),e=$(s),S(n,"class","svelte-1x3fcmm")},m(t,s){m(t,n,s),g(n,e)},p(t,n){t.population&&s!==(s=n.item.toString()+"")&&P(e,s)},d(t){t&&v(n)}}}function Bt(t){var n,e,s,o,r,i,a,l,u,c,h,f,p,d,y,_,C,B,A,k,V,E,M,z,O,j,G,U,q,R,T,D,I,H,L,N,F,W,K,J,Q,X,Y,Z,tt,st,ot,rt,lt,ut,ct,ht,ft,pt,dt,gt,mt,vt,bt,wt,yt,$t,xt,Bt,Pt,At,kt,Vt,Et=t.graph.nodes().length+"",Mt=t.best.toString()+"",zt=t.currentBest.bestValue+"",Ot=new _t({props:{running:t.running}});let jt=t.population,Gt=[];for(let n=0;n<jt.length;n+=1)Gt[n]=St(Ct(t,jt,n));return{c(){n=w("div"),e=w("div"),s=w("div"),Ot.$$.fragment.c(),o=x(),r=w("div"),(i=w("div")).textContent="Stations:",a=x(),l=w("div"),u=$(Et),c=x(),h=w("div"),(f=w("div")).textContent="Generation:",p=x(),d=w("div"),y=$(t.currentGeneration),_=x(),C=w("div"),(B=w("div")).textContent="Mutations:",A=x(),k=w("div"),V=$(t.mutationsCount),E=x(),M=w("div"),(z=w("div")).textContent="Crossovers:",O=x(),j=w("div"),G=$(t.crossoversCount),U=x(),q=w("div"),(R=w("div")).textContent="Best result:",T=x(),D=w("div"),I=$(t.bestValue),H=x(),L=w("div"),N=w("div"),(F=w("div")).textContent="Сhange of the best result",W=x(),K=w("div"),J=w("p"),Q=$(t.bestValuesString),X=x(),Y=w("div"),(Z=w("div")).textContent="Best path",tt=x(),st=w("div"),ot=w("p"),rt=$(Mt),lt=x(),ut=w("div"),(ct=w("div")).textContent="Best path in current population",ht=x(),ft=w("div"),pt=w("p"),dt=$(t.bestPopulation),gt=x(),mt=w("div"),(vt=w("div")).textContent="Best value in population",bt=x(),wt=w("div"),yt=w("p"),$t=$(zt),xt=x(),Bt=w("div"),(Pt=w("div")).textContent="Population",At=x(),kt=w("div");for(let t=0;t<Gt.length;t+=1)Gt[t].c();S(s,"class","stop-watch svelte-1x3fcmm"),S(i,"class","label"),S(l,"class","value svelte-1x3fcmm"),S(r,"class","row svelte-1x3fcmm"),S(f,"class","label"),S(d,"class","value svelte-1x3fcmm"),S(h,"class","row svelte-1x3fcmm"),S(B,"class","label"),S(k,"class","value svelte-1x3fcmm"),S(C,"class","row svelte-1x3fcmm"),S(z,"class","label"),S(j,"class","value svelte-1x3fcmm"),S(M,"class","row svelte-1x3fcmm"),S(R,"class","label svelte-1x3fcmm"),S(D,"class","value svelte-1x3fcmm"),S(q,"class","row row-result svelte-1x3fcmm"),S(e,"class","table svelte-1x3fcmm"),S(F,"class","label-row svelte-1x3fcmm"),S(J,"class","svelte-1x3fcmm"),S(K,"class","value-row svelte-1x3fcmm"),S(N,"class","paths-row svelte-1x3fcmm"),S(Z,"class","label-row svelte-1x3fcmm"),S(ot,"class","svelte-1x3fcmm"),S(st,"class","value-row svelte-1x3fcmm"),S(Y,"class","paths-row svelte-1x3fcmm"),S(ct,"class","label-row svelte-1x3fcmm"),S(pt,"class","svelte-1x3fcmm"),S(ft,"class","value-row svelte-1x3fcmm"),S(ut,"class","paths-row svelte-1x3fcmm"),S(vt,"class","label-row svelte-1x3fcmm"),S(yt,"class","svelte-1x3fcmm"),S(wt,"class","value-row svelte-1x3fcmm"),S(mt,"class","paths-row svelte-1x3fcmm"),S(Pt,"class","label-row svelte-1x3fcmm"),S(kt,"class","value-row svelte-1x3fcmm"),S(Bt,"class","paths-row svelte-1x3fcmm"),S(L,"class","paths svelte-1x3fcmm"),S(n,"class","info svelte-1x3fcmm")},m(t,v){m(t,n,v),g(n,e),g(e,s),it(Ot,s,null),g(e,o),g(e,r),g(r,i),g(r,a),g(r,l),g(l,u),g(e,c),g(e,h),g(h,f),g(h,p),g(h,d),g(d,y),g(e,_),g(e,C),g(C,B),g(C,A),g(C,k),g(k,V),g(e,E),g(e,M),g(M,z),g(M,O),g(M,j),g(j,G),g(e,U),g(e,q),g(q,R),g(q,T),g(q,D),g(D,I),g(n,H),g(n,L),g(L,N),g(N,F),g(N,W),g(N,K),g(K,J),g(J,Q),g(L,X),g(L,Y),g(Y,Z),g(Y,tt),g(Y,st),g(st,ot),g(ot,rt),g(L,lt),g(L,ut),g(ut,ct),g(ut,ht),g(ut,ft),g(ft,pt),g(pt,dt),g(L,gt),g(L,mt),g(mt,vt),g(mt,bt),g(mt,wt),g(wt,yt),g(yt,$t),g(L,xt),g(L,Bt),g(Bt,Pt),g(Bt,At),g(Bt,kt);for(let t=0;t<Gt.length;t+=1)Gt[t].m(kt,null);Vt=!0},p(t,n){var e={};if(t.running&&(e.running=n.running),Ot.$set(e),Vt&&!t.graph||Et===(Et=n.graph.nodes().length+"")||P(u,Et),Vt&&!t.currentGeneration||P(y,n.currentGeneration),Vt&&!t.mutationsCount||P(V,n.mutationsCount),Vt&&!t.crossoversCount||P(G,n.crossoversCount),Vt&&!t.bestValue||P(I,n.bestValue),Vt&&!t.bestValuesString||P(Q,n.bestValuesString),Vt&&!t.best||Mt===(Mt=n.best.toString()+"")||P(rt,Mt),Vt&&!t.bestPopulation||P(dt,n.bestPopulation),Vt&&!t.currentBest||zt===(zt=n.currentBest.bestValue+"")||P($t,zt),t.population){let e;for(jt=n.population,e=0;e<jt.length;e+=1){const s=Ct(n,jt,e);Gt[e]?Gt[e].p(t,s):(Gt[e]=St(s),Gt[e].c(),Gt[e].m(kt,null))}for(;e<Gt.length;e+=1)Gt[e].d(1);Gt.length=jt.length}},i(t){Vt||(nt(Ot.$$.fragment,t),Vt=!0)},o(t){et(Ot.$$.fragment,t),Vt=!1},d(t){t&&v(n),at(Ot),b(Gt,t)}}}function Pt(t,n,e){let s,o,{running:r,graph:i,currentGeneration:a,mutationsCount:l,crossoversCount:u,bestValue:c,currentBest:h,population:f,best:p,bestValuesArray:d}=n;return t.$set=t=>{"running"in t&&e("running",r=t.running),"graph"in t&&e("graph",i=t.graph),"currentGeneration"in t&&e("currentGeneration",a=t.currentGeneration),"mutationsCount"in t&&e("mutationsCount",l=t.mutationsCount),"crossoversCount"in t&&e("crossoversCount",u=t.crossoversCount),"bestValue"in t&&e("bestValue",c=t.bestValue),"currentBest"in t&&e("currentBest",h=t.currentBest),"population"in t&&e("population",f=t.population),"best"in t&&e("best",p=t.best),"bestValuesArray"in t&&e("bestValuesArray",d=t.bestValuesArray)},t.$$.update=(t={population:1,currentBest:1,bestValuesArray:1})=>{(t.population||t.currentBest)&&e("bestPopulation",s=f[h.bestPosition]?f[h.bestPosition].toString():""),t.bestValuesArray&&e("bestValuesString",o=d.join(" > ").toString())},{running:r,graph:i,currentGeneration:a,mutationsCount:l,crossoversCount:u,bestValue:c,currentBest:h,population:f,best:p,bestValuesArray:d,bestPopulation:s,bestValuesString:o}}class At extends ct{constructor(t){super(),ut(this,t,Pt,Bt,i,["running","graph","currentGeneration","mutationsCount","crossoversCount","bestValue","currentBest","population","best","bestValuesArray"])}}const kt=wt(0),Vt=wt(0);function Et(t){return parseInt(Math.random()*t)}function Mt(t){return kt.update(t=>t+1),t}const zt=t=>Mt(function(t){return t.reverse()}(t)),Ot=t=>Mt(function(t){let n,e;do{n=Et(t.length-2),e=Et(t.length)}while(n>=e);for(var s=0,o=e-n+1>>1;s<o;s++)t.swap(n+s,e-s);return t}(t)),jt=t=>Mt(function(t){var n,e;do{n=Et(t.length>>1),e=Et(t.length)}while(n>=e);var s=t.slice(0,n),o=t.slice(n,e),r=t.slice(e,t.length);return o.concat(s).concat(r).clone()}(t));function Gt(t,n,e,s){let o=e.clone(),r=Ut("next",t,n,o,s),i=Ut("previous",t,n,o,s);return o[t]=r,o[n]=i,o}function Ut(t,n,e,s,o){let r,i,a=new Array,l=s[n].clone(),u=s[e].clone(),c=l[Et(l.length)];for(a.push(c);l.length>1;)r=l[t](l.indexOf(c)),i=u[t](u.indexOf(c)),l.deleteByValue(c),u.deleteByValue(c),c=o[c][r]<o[c][i]?r:i,a.push(c);return a}function qt(t=[]){const n=Math.random();return t.forEach((t,e)=>{if(n<=t)return e}),0}function Rt(t){var n,e,s,r,i,a,l,u,c,h,f,p,d,b,y,$,_,B,P,k,V,E,M,z,O,j,G,U,q,R,T,D=!1,I=!1,H=!1,L=!1;function N(){D=!0,t.input0_input_handler.call(l)}function F(){I=!0,t.input1_input_handler.call(p)}function K(){H=!0,t.input2_input_handler.call(_)}function J(){L=!0,t.input3_input_handler.call(E)}var Q=new At({props:{running:t.running,graph:t.graph,currentGeneration:t.currentGeneration,mutationsCount:t.mutationsCount,crossoversCount:t.crossoversCount,bestValue:t.bestValue,currentBest:t.currentBest,population:t.population,best:t.best,bestValuesArray:t.bestValuesArray}});return{c(){n=w("div"),e=w("div"),s=w("div"),r=w("label"),(i=w("span")).textContent="Population size:",a=x(),l=w("input"),u=x(),c=w("label"),(h=w("span")).textContent="Crossover probability:",f=x(),p=w("input"),d=x(),b=w("label"),(y=w("span")).textContent="Mutation probability:",$=x(),_=w("input"),B=x(),P=w("label"),(k=w("span")).textContent="Interval duration:",V=x(),E=w("input"),M=x(),z=w("div"),(O=w("button")).textContent="Start",j=x(),(G=w("button")).textContent="Stop",U=x(),Q.$$.fragment.c(),S(i,"class","svelte-gdz7qb"),S(l,"class","text-input svelte-gdz7qb"),S(l,"type","number"),S(l,"step","1"),S(l,"min","1"),S(l,"max","50"),S(r,"class","svelte-gdz7qb"),S(h,"class","svelte-gdz7qb"),S(p,"class","text-input svelte-gdz7qb"),S(p,"type","number"),S(p,"step","0.1"),S(p,"min","0.01"),S(p,"max","1"),S(c,"class","svelte-gdz7qb"),S(y,"class","svelte-gdz7qb"),S(_,"class","text-input svelte-gdz7qb"),S(_,"type","number"),S(_,"step","0.01"),S(_,"min","0.01"),S(_,"max","1"),S(b,"class","svelte-gdz7qb"),S(k,"class","svelte-gdz7qb"),E.disabled=t.running,S(E,"class","text-input svelte-gdz7qb"),S(E,"type","number"),S(E,"step","20"),S(E,"min","10"),S(E,"max","3000"),S(P,"class","svelte-gdz7qb"),S(O,"class","startButton protrude svelte-gdz7qb"),S(G,"class","startButton protrude svelte-gdz7qb"),S(z,"class","buttons svelte-gdz7qb"),S(s,"class","constants svelte-gdz7qb"),S(e,"class","result-wrapper svelte-gdz7qb"),S(n,"class","calculate-block svelte-gdz7qb"),T=[C(l,"input",N),C(p,"input",F),C(_,"input",K),C(E,"input",J),C(O,"click",t.onStart),C(G,"click",t.onStop)]},m(o,v){m(o,n,v),g(n,e),g(e,s),g(s,r),g(r,i),g(r,a),g(r,l),A(l,t.populationSize),g(s,u),g(s,c),g(c,h),g(c,f),g(c,p),A(p,t.crossoverProbability),g(s,d),g(s,b),g(b,y),g(b,$),g(b,_),A(_,t.mutationProbability),g(s,B),g(s,P),g(P,k),g(P,V),g(P,E),A(E,t.intervalDuration),g(s,M),g(s,z),g(z,O),g(z,j),g(z,G),g(e,U),it(Q,e,null),R=!0},p(t,n){!D&&t.populationSize&&A(l,n.populationSize),D=!1,!I&&t.crossoverProbability&&A(p,n.crossoverProbability),I=!1,!H&&t.mutationProbability&&A(_,n.mutationProbability),H=!1,!L&&t.intervalDuration&&A(E,n.intervalDuration),L=!1,R&&!t.running||(E.disabled=n.running);var e={};t.running&&(e.running=n.running),t.graph&&(e.graph=n.graph),t.currentGeneration&&(e.currentGeneration=n.currentGeneration),t.mutationsCount&&(e.mutationsCount=n.mutationsCount),t.crossoversCount&&(e.crossoversCount=n.crossoversCount),t.bestValue&&(e.bestValue=n.bestValue),t.currentBest&&(e.currentBest=n.currentBest),t.population&&(e.population=n.population),t.best&&(e.best=n.best),t.bestValuesArray&&(e.bestValuesArray=n.bestValuesArray),Q.$set(e)},i(t){R||(nt(Q.$$.fragment,t),q||W(()=>{(q=ot(n,ft,{y:50,duration:1e3})).start()}),R=!0)},o(t){et(Q.$$.fragment,t),R=!1},d(t){t&&v(n),at(Q),o(T)}}}function Tt(t,n,e){const s=R();let o,r,i,a=20,l=.9,u=.1,c=40,{graph:h,stationsBetween:f,dis:p}=n,d=!1,g=0,m=0,v=[],b=[],w={bestPosition:0,bestValue:[]},y=[],$=[];kt.subscribe(t=>e("mutationsCount",r=t)),Vt.subscribe(t=>e("crossoversCount",i=t));function x(){e("currentGeneration",g++,g),e("population",y=function(t,n,e,s,o){let r=t.clone(),i=new Array;i.push(r[n.bestPosition]),i.push(Ot(e.clone())),i.push(jt(e.clone())),i.push(zt(e.clone())),i.push(e.clone());const a=function(t=[]){const n=t.map(t=>1/t),e=n.reduce((t,n)=>t+=n);let s;return n.map(t=>t/e).map(t=>s=(s||0)+t)}(s);for(let t=5;t<o;t++)i.push(r[qt(a)]);return r=i}(y,w,b,$,a)),e("population",y=function(t,n,e,s){let o=new Array;for(let t=0;t<e;t++)Math.random()<s&&o.push(t);o.shuffle();for(let e=0,s=o.length-1;e<s;e+=2)t=Gt(o[e],o[e+1],t,n),Vt.update(t=>t+1);return t}(y,p,a,l)),e("population",y=function(t,n,e){let s=t.clone();for(let o=0;o<n;o++)Math.random()<e&&(Math.random()>.5?s[o]=Ot(t[o]):s[o]=jt(t[o]),o--);return s}(y,a,u)),_()}function _(){$=y.map(t=>(function(t,n){return t.reduce((t,e,s,o)=>t+=n[e][o[s-1]])})(t,p)),e("currentBest",w=function(t){const n=t.min();return{bestValue:n,bestPosition:t.indexOf(n)}}($)),(void 0===m||m>w.bestValue)&&(e("best",b=y[w.bestPosition].clone()),e("bestValue",m=w.bestValue),e("bestValuesArray",v=[...v,m]))}return q(()=>{clearInterval(o)}),t.$set=t=>{"graph"in t&&e("graph",h=t.graph),"stationsBetween"in t&&e("stationsBetween",f=t.stationsBetween),"dis"in t&&e("dis",p=t.dis)},{populationSize:a,crossoverProbability:l,mutationProbability:u,intervalDuration:c,graph:h,stationsBetween:f,dis:p,running:d,currentGeneration:g,bestValue:m,bestValuesArray:v,best:b,currentBest:w,population:y,mutationsCount:r,crossoversCount:i,onStart:function(){d||(e("currentGeneration",g=0),e("bestValue",m=void 0),e("best",b=[]),e("bestValuesArray",v=[]),e("currentBest",w=0),e("population",y=[]),$=new Array(a),kt.update(t=>0),Vt.update(t=>0),function(){const t=h.nodes().length;e("population",y=Array.apply(null,Array(a)).map(n=>(function(t){return Array.from(Array(t).keys()).shuffle()})(t))),_()}(),o=setInterval(x,c),e("running",d=!0))},onStop:function(){d&&(clearInterval(o),s("getResult",{result:b}),e("running",d=!1))},input0_input_handler:function(){a=B(this.value),e("populationSize",a)},input1_input_handler:function(){l=B(this.value),e("crossoverProbability",l)},input2_input_handler:function(){u=B(this.value),e("mutationProbability",u)},input3_input_handler:function(){c=B(this.value),e("intervalDuration",c)}}}class Dt extends ct{constructor(t){super(),ut(this,t,Tt,Rt,i,["graph","stationsBetween","dis"])}}function It(t,n,e){const s=Object.create(t);return s.station=n[e],s.index=e,s}function Ht(t,n,e){const s=Object.create(t);return s.station=n[e],s.indexInside=e,s}function Lt(t,n,e){const s=Object.create(t);return s.gap=n[e],s.index=e,s}function Nt(t){var n,e,s,r,i,a=t.getStation(t.station).text+"";function l(){return t.mouseenter_handler(t)}return{c(){n=w("div"),s=x(),e=new E(a,s),S(n,"class",r="aside-row__name "+(t.gap.counter-t.gap.stations.length+t.indexInside+1===t.showingRow?"active":"")+" svelte-1olue0"),i=[C(n,"mouseenter",l),C(n,"mouseout",t.disableStationHover)]},m(t,o){m(t,n,o),e.m(n),g(n,s)},p(s,o){t=o,s.resultPath&&a!==(a=t.getStation(t.station).text+"")&&e.p(a),(s.resultPath||s.showingRow)&&r!==(r="aside-row__name "+(t.gap.counter-t.gap.stations.length+t.indexInside+1===t.showingRow?"active":"")+" svelte-1olue0")&&S(n,"class",r)},d(t){t&&v(n),o(i)}}}function Ft(t){var n,e,s,o,r,i,a=t.gap.weight+"";let l=t.gap.stations,u=[];for(let n=0;n<l.length;n+=1)u[n]=Nt(Ht(t,l,n));return{c(){n=w("div"),e=w("div");for(let t=0;t<u.length;t+=1)u[t].c();s=x(),o=w("div"),r=$(a),i=x(),S(e,"class","aside-row__stations svelte-1olue0"),S(o,"class","aside-row__weight svelte-1olue0"),S(n,"class","aside-row svelte-1olue0")},m(t,a){m(t,n,a),g(n,e);for(let t=0;t<u.length;t+=1)u[t].m(e,null);g(n,s),g(n,o),g(o,r),g(n,i)},p(t,n){if(t.resultPath||t.showingRow||t.getStation){let s;for(l=n.gap.stations,s=0;s<l.length;s+=1){const o=Ht(n,l,s);u[s]?u[s].p(t,o):(u[s]=Nt(o),u[s].c(),u[s].m(e,null))}for(;s<u.length;s+=1)u[s].d(1);u.length=l.length}t.resultPath&&a!==(a=n.gap.weight+"")&&P(r,a)},d(t){t&&v(n),b(u,t)}}}function Wt(t){var n,e,s,o,r,i,a,l,u=t.station.path+"",c=t.station.stop+"",h=t.station.text+"";return{c(){n=y("g"),e=y("g"),o=y("g"),i=y("text"),S(e,"fill","none"),S(e,"stroke-miterlimit","10"),S(e,"stroke-width","28"),S(e,"stroke",s=t.colors[t.station.color]),S(o,"fill",r=t.colors[t.station.color]),S(i,"style",a=t.station.style),S(n,"class",l="station "+(t.showingStation==t.station.id?"fadein":"")+" svelte-1olue0")},m(t,s){m(t,n,s),g(n,e),e.innerHTML=u,g(n,o),o.innerHTML=c,g(n,i),i.innerHTML=h},p(t,f){t.stationsPath&&u!==(u=f.station.path+"")&&(e.innerHTML=u),t.stationsPath&&s!==(s=f.colors[f.station.color])&&S(e,"stroke",s),t.stationsPath&&c!==(c=f.station.stop+"")&&(o.innerHTML=c),t.stationsPath&&r!==(r=f.colors[f.station.color])&&S(o,"fill",r),t.stationsPath&&h!==(h=f.station.text+"")&&(i.innerHTML=h),t.stationsPath&&a!==(a=f.station.style)&&S(i,"style",a),(t.showingStation||t.stationsPath)&&l!==(l="station "+(f.showingStation==f.station.id?"fadein":"")+" svelte-1olue0")&&S(n,"class",l)},d(t){t&&v(n)}}}function Kt(t,n){var e,s,o=n.station&&Wt(n);return{key:t,first:null,c(){e=_(),o&&o.c(),s=_(),this.first=e},m(t,n){m(t,e,n),o&&o.m(t,n),m(t,s,n)},p(t,n){n.station?o?o.p(t,n):((o=Wt(n)).c(),o.m(s.parentNode,s)):o&&(o.d(1),o=null)},d(t){t&&v(e),o&&o.d(t),t&&v(s)}}}function Jt(n){var e,s,o,r,i,a,l,u,c,h,f,p,d,_,B,P,A,k,V,E,M,z,O,j,G,U,q,R=[],T=new Map;let D=n.resultPath,I=[];for(let t=0;t<D.length;t+=1)I[t]=Ft(Lt(n,D,t));let H=n.stationsPath;const L=t=>t.station.id;for(let t=0;t<H.length;t+=1){let e=It(n,H,t),s=L(e);T.set(s,R[t]=Kt(s,e))}return{c(){e=w("div"),s=w("aside"),(o=w("button")).textContent="Play",r=x();for(let t=0;t<I.length;t+=1)I[t].c();i=x(),a=y("svg"),l=y("defs"),u=y("symbol"),c=y("path"),h=y("path"),f=y("path"),p=y("g"),d=y("text"),_=$("Холодногірсько-заводська лінія\r\n      "),B=y("text"),P=$("Салтівська лінія\r\n      "),A=y("text"),k=$("Олексіївська лінія\r\n      "),V=y("g");for(let t=0;t<R.length;t+=1)R[t].c();E=y("g"),M=y("text"),z=$("Державiнська"),O=y("text"),j=$("Одеська"),S(o,"class","start-button svelte-1olue0"),S(s,"class","svelte-1olue0"),S(c,"fill","#fff"),S(c,"d","M6.6 11.5a4.9 4.9 0 110-9.8A4.8 4.8 0 019.7 3a9.7 9.7 0 004.5\r\n          2v3.5a9.7 9.7 0 00-3.9 1.6l-.9.6a4.8 4.8 0 01-2.8 1z"),S(h,"d","M6.7 3.5a3 3 0 012 .7 11.5 11.5 0 003.7 2V7a11.4 11.4 0 00-3.1\r\n          1.6l-.9.6a3 3 0 01-1.8.6 3.1 3.1 0 110-6.3m0-3.5A6.6 6.6 0 000 6.6a6.6\r\n          6.6 0 006.6 6.7 6.5 6.5 0 003.8-1.3l.9-.6a8 8 0 014.6-1.4V3.3a8 8 0\r\n          01-5-1.8A6.5 6.5 0 006.6 0z"),S(u,"id","w"),S(f,"fill","none"),S(f,"stroke",n.colors.green),S(f,"stroke-width","3"),S(f,"d","M747 1310l-18-18-241 241a72 72 0 00-21 51v85h-15v21h56v-21h-16v-85a47\r\n      47 0 0114-34l46-45 12 12 15-15-12-12z"),S(d,"fill",n.colors.red),S(d,"transform","rotate(-90 1562.5 515.7)"),S(B,"fill",n.colors.blue),S(B,"transform","rotate(-90 700.6 -347.6)"),S(A,"fill",n.colors.green),S(A,"transform","rotate(-90 415.7 -32.8)"),S(p,"font-size","34"),S(V,"fill",n.colors.text),S(V,"font-size","53"),S(M,"transform","translate(573 1556)"),S(O,"transform","translate(519 1690)"),S(E,"fill",n.colors.textDisable),S(E,"font-size","53"),S(a,"xmlns","http://www.w3.org/2000/svg"),S(a,"xmlns:xlink","http://www.w3.org/1999/xlink"),S(a,"class",G="map "+(n.isMapActive?"map-active":"")+" svelte-1olue0"),S(a,"font-family","Tahoma"),S(a,"viewBox","0 0 1501 2151"),S(e,"class","container svelte-1olue0"),q=C(o,"click",n.onPlay)},m(t,n){m(t,e,n),g(e,s),g(s,o),g(s,r);for(let t=0;t<I.length;t+=1)I[t].m(s,null);g(e,i),g(e,a),g(a,l),g(l,u),g(u,c),g(u,h),g(a,f),g(a,p),g(p,d),g(d,_),g(p,B),g(B,P),g(p,A),g(A,k),g(a,V);for(let t=0;t<R.length;t+=1)R[t].m(V,null);g(a,E),g(E,M),g(M,z),g(E,O),g(O,j)},p(t,n){if(t.resultPath||t.showingRow||t.getStation){let e;for(D=n.resultPath,e=0;e<D.length;e+=1){const o=Lt(n,D,e);I[e]?I[e].p(t,o):(I[e]=Ft(o),I[e].c(),I[e].m(s,null))}for(;e<I.length;e+=1)I[e].d(1);I.length=D.length}const e=n.stationsPath;R=function(t,n,e,s,o,r,i,a,l,u,c,h){let f=t.length,p=r.length,d=f;const g={};for(;d--;)g[t[d].key]=d;const m=[],v=new Map,b=new Map;for(d=p;d--;){const t=h(o,r,d),a=e(t);let l=i.get(a);l?s&&l.p(n,t):(l=u(a,t)).c(),v.set(a,m[d]=l),a in g&&b.set(a,Math.abs(d-g[a]))}const w=new Set,y=new Set;function $(t){nt(t,1),t.m(a,c),i.set(t.key,t),c=t.first,p--}for(;f&&p;){const n=m[p-1],e=t[f-1],s=n.key,o=e.key;n===e?(c=n.first,f--,p--):v.has(o)?!i.has(s)||w.has(s)?$(n):y.has(o)?f--:b.get(s)>b.get(o)?(y.add(s),$(n)):(w.add(o),f--):(l(e,i),f--)}for(;f--;){const n=t[f];v.has(n.key)||l(n,i)}for(;p;)$(m[p-1]);return m}(R,t,L,1,n,e,T,V,rt,Kt,null,It),t.isMapActive&&G!==(G="map "+(n.isMapActive?"map-active":"")+" svelte-1olue0")&&S(a,"class",G)},i(t){U||W(()=>{(U=ot(e,ft,{y:50,duration:1e3})).start()})},o:t,d(t){t&&v(e),b(I,t);for(let t=0;t<R.length;t+=1)R[t].d();q()}}}const Qt=200;function Xt(t,n,e){let s,o,{stationsBetween:r,path:i,stations:a}=n,l=!0,u=[],c=[],h=null;function f(t,n){p(),d(t),e("showingRow",h=null)}function p(){e("showingRow",h=null),clearInterval(s)}function d(t){e("isMapActive",l=!1),e("showingStation",o=t)}function g(){e("isMapActive",l=!0),e("showingStation",o=null)}function m({path:t=[],stationsBetween:n}){let s=[];return e("resultPath",u=function({path:t=[],stationsBetween:n}){let e=new Array(t.length),s=0;for(let o=1;o<t.length;o++){const r=t[o-1],i=t[o],a=n[r][i];s+=a.length-1,e[o]={stations:a.slice(1),weight:a.weight,counter:s}}return e[0]={stations:[t[0].toString()],weight:0,counter:0},e}({path:t,stationsBetween:n})),u.map(t=>{t.stations.map(t=>{s.push(a.find(n=>n.id==t))})}),s}const v=t=>a.find(n=>n.id==t)||{};return t.$set=t=>{"stationsBetween"in t&&e("stationsBetween",r=t.stationsBetween),"path"in t&&e("path",i=t.path),"stations"in t&&e("stations",a=t.stations)},t.$$.update=(t={path:1,stationsBetween:1})=>{(t.path||t.stationsBetween)&&e("stationsPath",c=m({path:i,stationsBetween:r}))},{stationsBetween:r,path:i,stations:a,isMapActive:l,resultPath:u,stationsPath:c,showingStation:o,showingRow:h,onStationHover:f,onPlay:function(){p(),function(){let t=0;s=setInterval(()=>{t<c.length?(d(c[t].id),e("showingRow",h=t),t++):(p(),g())},Qt)}()},disableStationHover:g,getStation:v,colors:{red:"#d22531",blue:"#2060ba",green:"#41a747",text:"#09303b",textDisable:"#9c98a6"},mouseenter_handler:({station:t})=>f(v(t).id)}}class Yt extends ct{constructor(t){super(),ut(this,t,Xt,Jt,i,["stationsBetween","path","stations"])}}const Zt=[{id:1,name:"Kharkiv metro",graphUrl:"https://metro.kh.ua/metroapi.php?value=path",stationsUrl:"https://metro.kh.ua/metroapi.php?value=stations"},{id:2,name:"Other metro",graphUrl:null,stationsUrl:null}];function tn(t,n,e){const s=Object.create(t);return s.id=n[e].id,s.name=n[e].name,s}function nn(t){var n,e,s,r,i=t.name+"";return{c(){n=w("label"),e=w("input"),s=$(i),t.$$binding_groups[0].push(e),S(e,"type","radio"),e.__value=t.id,e.value=e.__value,S(n,"class","radio-input svelte-u9ihhx"),r=[C(e,"change",t.input_change_handler),C(e,"change",t.onChange)]},m(o,r){m(o,n,r),g(n,e),e.checked=e.__value===t.selectedMetro,g(n,s)},p(t,n){t.selectedMetro&&(e.checked=e.__value===n.selectedMetro)},d(s){s&&v(n),t.$$binding_groups[0].splice(t.$$binding_groups[0].indexOf(e),1),o(r)}}}function en(n){var e,s,r,i,a,l,u,c=!1;function h(){c=!0,n.input_input_handler.call(a)}let f=Zt,p=[];for(let t=0;t<f.length;t+=1)p[t]=nn(tn(n,f,t));return{c(){e=w("section"),s=w("label"),(r=w("span")).textContent="Station stay time, min",i=x(),a=w("input"),l=x();for(let t=0;t<p.length;t+=1)p[t].c();S(r,"class","svelte-u9ihhx"),S(a,"class","input-number svelte-u9ihhx"),S(a,"type","number"),S(a,"min","0"),S(a,"max","10"),S(s,"class","text-field svelte-u9ihhx"),S(e,"class","svelte-u9ihhx"),u=[C(a,"input",h),C(a,"change",n.onChange)]},m(t,o){m(t,e,o),g(e,s),g(s,r),g(s,i),g(s,a),A(a,n.timeOnStation),g(e,l);for(let t=0;t<p.length;t+=1)p[t].m(e,null)},p(t,n){if(!c&&t.timeOnStation&&A(a,n.timeOnStation),c=!1,t.schemes||t.selectedMetro){let s;for(f=Zt,s=0;s<f.length;s+=1){const o=tn(n,f,s);p[s]?p[s].p(t,o):(p[s]=nn(o),p[s].c(),p[s].m(e,null))}for(;s<p.length;s+=1)p[s].d(1);p.length=f.length}},i:t,o:t,d(t){t&&v(e),b(p,t),o(u)}}}function sn(t,n,e){const s=R();let o,r;function i(){const t=Zt.find(t=>t.id===o);s("onSelectMetro",{result:o,timeOnStation:r,graphUrl:t&&t.graphUrl,stationsUrl:t&&t.stationsUrl})}var a;a=()=>{e("selectedMetro",o=Zt&&Zt.length&&Zt[0].id),e("timeOnStation",r=5),i()},U().$$.on_mount.push(a);return{selectedMetro:o,timeOnStation:r,onChange:i,input_input_handler:function(){r=B(this.value),e("timeOnStation",r)},input_change_handler:function(){o=this.__value,e("selectedMetro",o)},$$binding_groups:[[]]}}class on extends ct{constructor(t){super(),ut(this,t,sn,en,i,[])}}function rn(n){var e,s,r,i,a;return{c(){e=w("section"),s=w("input"),r=x(),(i=w("button")).textContent="Send",S(s,"type","text"),S(s,"class","svelte-1nmsanh"),S(i,"class","svelte-1nmsanh"),S(e,"class","svelte-1nmsanh"),a=[C(s,"input",n.input_input_handler),C(i,"click",n.onSubmit)]},m(t,o){m(t,e,o),g(e,s),A(s,n.jsonUrl),g(e,r),g(e,i)},p(t,n){t.jsonUrl&&s.value!==n.jsonUrl&&A(s,n.jsonUrl)},i:t,o:t,d(t){t&&v(e),o(a)}}}function an(t,n,e){const s=R();let o;return{jsonUrl:o,onSubmit:function(){s("onSubmitGraph",{graphUrl:o})},input_input_handler:function(){o=this.value,e("jsonUrl",o)}}}class ln extends ct{constructor(t){super(),ut(this,t,an,rn,i,[])}}var un=function(t){var n={addNode:o,removeNode:function(t){return Object.keys(e).forEach((function(n){e[n].forEach((function(e){e===t&&h(n,e)}))})),delete e[t],n},nodes:r,adjacent:i,addEdge:c,removeEdge:h,setEdgeWeight:l,getEdgeWeight:u,indegree:function(t){var n=0;function s(e){e===t&&n++}return Object.keys(e).forEach((function(t){e[t].forEach(s)})),n},outdegree:function(t){return t in e?e[t].length:0},depthFirstSearch:f,lowestCommonAncestors:function(t,n){var e=[],s=[];(function t(o,r){return!!o[r]||(o[r]=!0,e.push(r),r==n?(s.push(r),!1):i(r).every(n=>t(o,n)))})({},t)&&function t(n,o){n[o]||(n[o]=!0,e.indexOf(o)>=0?s.push(o):0==s.length&&i(o).forEach(e=>{t(n,e)}))}({},n);return s},topologicalSort:function(t,n){return f(t,n).reverse()},shortestPath:function(t,n){var e={},s={},o={};function a(){var t,n=1/0;return Object.keys(o).forEach((function(s){e[s]<n&&(n=e[s],t=s)})),void 0===t?(o={},null):(delete o[t],t)}function l(t,n){var o=u(t,n);e[n]>e[t]+o&&(e[n]=e[t]+o,s[n]=t)}return function(){(function(){if(r().forEach((function(t){e[t]=1/0})),e[t]!==1/0)throw new Error("Source node is not in the graph");if(e[n]!==1/0)throw new Error("Destination node is not in the graph");e[t]=0})(),r().forEach((function(t){o[t]=!0}));for(;0!==Object.keys(o).length;){var s=a();i(s).forEach((function(t){l(s,t)}))}}(),function(){var e=[],o=0,r=n;for(;s[r];)e.push(r),o+=u(s[r],r),r=s[r];if(r!==t)throw new Error("No path found");return e.push(r),e.reverse(),e.weight=o,e}()},serialize:function(){var t={nodes:r().map((function(t){return{id:t}})),links:[]};return t.nodes.forEach((function(n){var e=n.id;i(e).forEach((function(n){t.links.push({source:e,target:n,weight:u(e,n)})}))})),t},deserialize:p},e={},s={};function o(t){return e[t]=i(t),n}function r(){var t={};return Object.keys(e).forEach((function(n){t[n]=!0,e[n].forEach((function(n){t[n]=!0}))})),Object.keys(t)}function i(t){return e[t]||[]}function a(t,n){return t+"|"+n}function l(t,e,o){return s[a(t,e)]=o,n}function u(t,n){var e=s[a(t,n)];return void 0===e?1:e}function c(t,e,s){return o(t),o(e),i(t).push(e),void 0!==s&&l(t,e,s),n}function h(t,s){return e[t]&&(e[t]=i(t).filter((function(t){return t!==s}))),n}function f(t,n){t||(t=r()),"boolean"!=typeof n&&(n=!0);var e={},s=[];function o(t){e[t]||(e[t]=!0,i(t).forEach(o),s.push(t))}return n?t.forEach(o):(t.forEach((function(t){e[t]=!0})),t.forEach((function(t){i(t).forEach(o)}))),s}function p(t){return t.nodes.forEach((function(t){o(t.id)})),t.links.forEach((function(t){c(t.source,t.target,t.weight)})),n}return(t&&p(t),n)};function cn(t=[],n=0){function e(t){return t+n}const s=un(),o=un();t.map(t=>({...t,weight:e(t.weight)})).map(t=>{s.addEdge(t.from,t.to,t.weight),s.addEdge(t.to,t.from,t.weight)});let r=[];s.nodes().map((t,n)=>{r.push([]),s.nodes().map(e=>{const i=s.shortestPath(t,e);o.addEdge(t,e,i.weight),r[n].push(i)})});const i=function(t){const n=t.nodes(),e=n.length;return Array.apply(null,Array(e)).map((s,o)=>Array.apply(null,Array(e)).map((e,s)=>~~t.getEdgeWeight(n[o],n[s])))}(o);return{graph:o,stationsBetween:r,distances:i}}let hn={};async function fn(t,n){if(hn[t])return hn[t];const e=await n();return hn[t]=e,e}function pn(t){var n,e=new ln({});return e.$on("onSubmitGraph",t.onGetUserGraph),{c(){e.$$.fragment.c()},m(t,s){it(e,t,s),n=!0},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){et(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function dn(t){var n,e=new Dt({props:{graph:t.graph,stationsBetween:t.stationsBetween,dis:t.dis}});return e.$on("getResult",t.getResult),{c(){e.$$.fragment.c()},m(t,s){it(e,t,s),n=!0},p(t,n){var s={};t.graph&&(s.graph=n.graph),t.stationsBetween&&(s.stationsBetween=n.stationsBetween),t.dis&&(s.dis=n.dis),e.$set(s)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){et(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function gn(t){var n,e=new Yt({props:{path:t.bestPath,stationsBetween:t.stationsBetween,stations:t.stations}});return{c(){e.$$.fragment.c()},m(t,s){it(e,t,s),n=!0},p(t,n){var s={};t.bestPath&&(s.path=n.bestPath),t.stationsBetween&&(s.stationsBetween=n.stationsBetween),t.stations&&(s.stations=n.stations),e.$set(s)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){et(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function mn(t){var n,e,s,o,r,i,a,l=new on({});l.$on("onSelectMetro",t.onSelectMetro);var u=t.isCustomShowed&&pn(t),c=t.graph&&t.stationsBetween&&t.dis&&t.isCalculateShowed&&dn(t),h=t.stations&&t.bestPath&&gn(t);return{c(){(n=w("header")).innerHTML="<h1>Transit challenge solver</h1> <p>For Kharkiv metropoliten</p>",e=x(),s=w("main"),l.$$.fragment.c(),o=x(),u&&u.c(),r=x(),c&&c.c(),i=x(),h&&h.c()},m(t,f){m(t,n,f),m(t,e,f),m(t,s,f),it(l,s,null),g(s,o),u&&u.m(s,null),g(s,r),c&&c.m(s,null),g(s,i),h&&h.m(s,null),a=!0},p(t,n){n.isCustomShowed?u?nt(u,1):((u=pn(n)).c(),nt(u,1),u.m(s,r)):u&&(Z(),et(u,1,1,()=>{u=null}),tt()),n.graph&&n.stationsBetween&&n.dis&&n.isCalculateShowed?c?(c.p(t,n),nt(c,1)):((c=dn(n)).c(),nt(c,1),c.m(s,i)):c&&(Z(),et(c,1,1,()=>{c=null}),tt()),n.stations&&n.bestPath?h?(h.p(t,n),nt(h,1)):((h=gn(n)).c(),nt(h,1),h.m(s,null)):h&&(Z(),et(h,1,1,()=>{h=null}),tt())},i(t){a||(nt(l.$$.fragment,t),nt(u),nt(c),nt(h),a=!0)},o(t){et(l.$$.fragment,t),et(u),et(c),et(h),a=!1},d(t){t&&(v(n),v(e),v(s)),at(l),u&&u.d(),c&&c.d(),h&&h.d()}}}function vn(t,n,e){let s,o,r,i,a,l,u,c,h,f=!1,p=!1;async function d(t){const n=await fn(`${r+i}-graphData`,()=>(async function(t,n){const e=await fetch(t);return cn(await e.json(),n)})(t,i));e("graph",u=n.graph),e("stationsBetween",c=n.stationsBetween),e("dis",h=n.distances)}async function g(t){const n=await fn(`${r+i}-stations`,()=>(async function(t){const n=await fetch(t);return await n.json()})(t));e("stations",l=n)}async function m(){s&&await d(s),e("isCalculateShowed",f=!0),o&&await g(o)}return{bestPath:a,stations:l,graph:u,stationsBetween:c,dis:h,isCalculateShowed:f,isCustomShowed:p,onSelectMetro:function(t){return r=t.detail.result,s=t.detail.graphUrl,o=t.detail.stationsUrl,i=t.detail.timeOnStation,e("bestPath",a=null),e("stations",l=null),e("isCalculateShowed",f=!1),s||o?(m(),e("isCustomShowed",p=!1)):e("isCustomShowed",p=!0)},getResult:function(t){e("bestPath",a=t.detail.result)},onGetUserGraph:async function(t){s=t.detail.graphUrl,o=t.detail.stationsUrl,m()}}}return Array.prototype.clone=function(){return this.slice(0)},Array.prototype.max=function(){return Math.max.apply(null,this)},Array.prototype.min=function(){return Math.min.apply(null,this)},Array.prototype.shuffle=function(){if(!this.length)return this;for(var t,n,e=this.length-1;e;t=Et(e),n=this[--e],this[e]=this[t],this[t]=n);return this},Array.prototype.indexOf=function(t){for(var n=0;n<this.length;n++)if(this[n]===t)return n},Array.prototype.deleteByValue=function(t){var n=this.indexOf(t);this.splice(n,1)},Array.prototype.next=function(t){return t===this.length-1?this[0]:this[t+1]},Array.prototype.previous=function(t){return 0===t?this[this.length-1]:this[t-1]},Array.prototype.swap=function(t,n){if(!(t>this.length||n>this.length||t===n)){var e=this[t];this[t]=this[n],this[n]=e}},Array.prototype.roll=function(){for(var t=Et(this.length),n=[],e=t;e<this.length;e++)n.push(this[e]);for(e=0;e<t;e++)n.push(this[e]);return n},new class extends ct{constructor(t){super(),ut(this,t,vn,mn,i,[])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
